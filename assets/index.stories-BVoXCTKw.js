import{j as m}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{i as d}from"./index-DbXIB-0m.js";const p=()=>{const e={mark:()=>{},measure:()=>null,clearMarks:()=>{},clearMeasures:()=>{},getMarks:()=>[],getMeasures:()=>[]};return d()?typeof performance>"u"||!performance.mark||!performance.measure?(console.warn("[performanceMark] Performance API is not supported"),e):{mark:r=>{performance.mark(r)},measure:(r,k,u)=>{try{const s=u||`__temp_end_${Date.now()}`;u||performance.mark(s);const n=performance.measure(r,k,s);return u||performance.clearMarks(s),{name:n.name,duration:n.duration,startTime:n.startTime,endTime:n.startTime+n.duration}}catch(s){return console.warn(`[performanceMark] Failed to measure "${r}":`,s),null}},clearMarks:r=>{r?performance.clearMarks(r):performance.clearMarks()},clearMeasures:r=>{r?performance.clearMeasures(r):performance.clearMeasures()},getMarks:r=>r?performance.getEntriesByName(r,"mark"):performance.getEntriesByType("mark"),getMeasures:r=>r?performance.getEntriesByName(r,"measure"):performance.getEntriesByType("measure")}:e},{action:M}=__STORYBOOK_MODULE_ACTIONS__,_=()=>{const e=p();e.mark("demo-start");let a=0;for(let t=0;t<1e5;t++)a+=t;e.mark("demo-end");const o=e.getMarks();M("打标记点成功")({marks:o.map(t=>({name:t.name,startTime:`${t.startTime.toFixed(2)}ms`})),计算结果:a})},{action:l}=__STORYBOOK_MODULE_ACTIONS__,g=()=>{const e=p();e.mark("fetch-start"),setTimeout(()=>{e.mark("fetch-end");const a=e.measure("fetch-duration","fetch-start","fetch-end");a&&l("测量耗时成功")({名称:a.name,耗时:`${a.duration.toFixed(2)}ms`,开始时间:`${a.startTime.toFixed(2)}ms`,结束时间:`${a.endTime.toFixed(2)}ms`});const o=e.getMeasures();l("所有测量记录")(o.map(t=>({name:t.name,duration:`${t.duration.toFixed(2)}ms`})))},100),l("开始异步操作")("等待 100ms...")},{action:c}=__STORYBOOK_MODULE_ACTIONS__,T=()=>{const e=p();e.mark("test-mark-1"),e.mark("test-mark-2"),e.measure("test-measure","test-mark-1","test-mark-2"),c("创建标记和测量")({标记数量:e.getMarks().length,测量数量:e.getMeasures().length}),e.clearMarks("test-mark-1"),c("清除 test-mark-1 后")({剩余标记:e.getMarks().map(a=>a.name)}),e.clearMarks(),c("清除所有标记后")({剩余标记数量:e.getMarks().length}),e.clearMeasures(),c("清除所有测量后")({剩余测量数量:e.getMeasures().length})},f=()=>m.jsxs("div",{children:[m.jsx("div",{className:"button",onClick:_,children:"基础标记 (mark)"}),m.jsx("div",{className:"button",onClick:g,children:"测量耗时 (measure)"}),m.jsx("div",{className:"button",onClick:T,children:"清除标记和测量"})]});f.__docgenInfo={description:"",methods:[],displayName:"PerformanceMarkDemo"};const N={title:"element-utils/performanceMark",component:f,parameters:{layout:"centered"},argTypes:{}},i={};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:"{}",...i.parameters?.docs?.source}}};const $=["Demo"];export{i as Demo,$ as __namedExportsOrder,N as default};
