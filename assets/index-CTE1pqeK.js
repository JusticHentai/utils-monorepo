import{r as e}from"./iframe-BWchUvSv.js";const v=(o,T)=>{const{delay:t,immediate:m=!1,maxWait:c}=T,R=t>=0&&(c===void 0||c>=t),i=e.useRef(o);e.useEffect(()=>{i.current=o});const r=e.useRef(null),a=e.useRef(null),u=e.useRef(null),l=e.useRef(!1),f=e.useRef(null),n=e.useCallback(()=>{r.current&&(clearTimeout(r.current),r.current=null),a.current&&(clearTimeout(a.current),a.current=null)},[]),s=e.useCallback(()=>{u.current!==null&&(i.current(...u.current),u.current=null),l.current=!1,f.current=null,n()},[n]),b=e.useCallback(()=>{n(),u.current=null,l.current=!1,f.current=null},[n]),k=e.useCallback(()=>{u.current!==null&&s()},[s]),d=e.useCallback(()=>r.current!==null,[]),x=e.useCallback((...C)=>{if(R){if(u.current=C,r.current&&clearTimeout(r.current),m){l.current||(l.current=!0,i.current(...C),u.current=null),r.current=setTimeout(()=>{l.current=!1,r.current=null},t);return}c!==void 0&&f.current===null&&(f.current=Date.now(),a.current=setTimeout(()=>{s()},c)),r.current=setTimeout(()=>{s()},t)}},[t,m,c,R,s]);return e.useEffect(()=>()=>{n()},[n]),{run:x,cancel:b,flush:k,isPending:d}};export{v as u};
