import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as w}from"./iframe-BWchUvSv.js";import{l as C}from"./index-DgOQnT5b.js";/* empty css              */import"./preload-helper-PPVm8Dsz.js";const R=t=>{const{ctx:e,element:o,path:i}=t;i?e.drawFocusIfNeeded(i,o):e.drawFocusIfNeeded(o)},k=t=>{const{x:e,y:o,radius:i,startAngle:l,endAngle:r,counterclockwise:d=!1,fillColor:n,strokeColor:x,lineWidth:c=1,closePath:h=!1,ctx:a}=t;a.beginPath(),h&&a.moveTo(e,o),a.arc(e,o,i,l,r,d),h&&a.closePath(),n&&(a.fillStyle=n,a.fill()),x&&(a.strokeStyle=x,a.lineWidth=c,a.stroke())},W=t=>{const{x1:e,y1:o,cp1x:i,cp1y:l,cp2x:r,cp2y:d,x2:n,y2:x,color:c="#000",lineWidth:h=1,lineCap:a="butt",ctx:f}=t;f.beginPath(),f.moveTo(e,o),f.bezierCurveTo(i,l,r,d,n,x),f.strokeStyle=c,f.lineWidth=h,f.lineCap=a,f.stroke()},I=t=>{const{x:e,y:o,radius:i,ctx:l,fillColor:r,strokeColor:d,lineWidth:n=1}=t;l.beginPath(),l.arc(e,o,i,0,Math.PI*2),r&&(l.fillStyle=r,l.fill()),d&&(l.strokeStyle=d,l.lineWidth=n,l.stroke()),l.closePath()},P=async t=>{const{url:e,x:o,y:i,width:l,height:r,ctx:d,clipType:n,radius:x=0}=t,[c,h]=await C(e);if(h||!c)return[c,h];if(d.save(),d.beginPath(),n==="circle"){const a=o+l/2,f=i+r/2,g=Math.min(l,r)/2;d.arc(a,f,g,0,Math.PI*2)}else if(n==="roundRect"){const[a,f,g,u]=Array.isArray(x)?x:[x,x,x,x];d.moveTo(o+a,i),d.lineTo(o+l-f,i),d.arcTo(o+l,i,o+l,i+f,f),d.lineTo(o+l,i+r-g),d.arcTo(o+l,i+r,o+l-g,i+r,g),d.lineTo(o+u,i+r),d.arcTo(o,i+r,o,i+r-u,u),d.lineTo(o,i+a),d.arcTo(o,i,o+a,i,a)}d.closePath(),d.clip(),d.drawImage(c,o,i,l,r),d.restore()},D=t=>{const{ctx:e,startAngle:o,x:i,y:l,colorStops:r,fillX:d,fillY:n,fillWidth:x,fillHeight:c}=t,h=e.createConicGradient(o,i,l);return r.forEach(a=>{h.addColorStop(a.offset,a.color)}),e.fillStyle=h,e.fillRect(d,n,x,c),h},z=t=>{const{x:e,y:o,radiusX:i,radiusY:l,rotation:r=0,startAngle:d=0,endAngle:n=Math.PI*2,counterclockwise:x=!1,fillColor:c,strokeColor:h,lineWidth:a=1,ctx:f}=t;f.beginPath(),f.ellipse(e,o,i,l,r,d,n,x),c&&(f.fillStyle=c,f.fill()),h&&(f.strokeStyle=h,f.lineWidth=a,f.stroke())},A=async t=>{const{url:e,x:o,y:i,width:l,height:r,ctx:d,sx:n,sy:x,sWidth:c,sHeight:h}=t,[a,f]=await C(e);return a&&(n!==void 0&&x!==void 0&&c!==void 0&&h!==void 0?d.drawImage(a,n,x,c,h,o,i,l,r):d.drawImage(a,o,i,l,r)),[a,f]},L=t=>{const{x1:e,y1:o,x2:i,y2:l,ctx:r,color:d="#000",lineWidth:n=1,lineCap:x="butt",lineDash:c}=t;r.beginPath(),r.moveTo(e,o),r.lineTo(i,l),r.strokeStyle=d,r.lineWidth=n,r.lineCap=x,c&&r.setLineDash(c),r.stroke(),r.closePath(),c&&r.setLineDash([])},j=t=>{const{x1:e,y1:o,x2:i,y2:l,colorStops:r,ctx:d}=t,n=d.createLinearGradient(e,o,i,l);return r.forEach(({offset:x,color:c})=>{n.addColorStop(x,c)}),n},B=t=>{const{ctx:e,commands:o,fillColor:i,strokeColor:l,lineWidth:r=1}=t;e.beginPath(),o.forEach(d=>{switch(d.type){case"moveTo":e.moveTo(d.x??0,d.y??0);break;case"lineTo":e.lineTo(d.x??0,d.y??0);break;case"closePath":e.closePath();break}}),i&&(e.fillStyle=i,e.fill()),l&&(e.strokeStyle=l,e.lineWidth=r,e.stroke())},N=t=>{const{x:e,y:o,radius:i,sides:l,rotation:r=0,fillColor:d,strokeColor:n,lineWidth:x=1,ctx:c}=t;if(l<3)return;const h=Math.PI*2/l;c.beginPath();for(let a=0;a<=l;a++){const f=a*h+r-Math.PI/2,g=e+i*Math.cos(f),u=o+i*Math.sin(f);a===0?c.moveTo(g,u):c.lineTo(g,u)}c.closePath(),d&&(c.fillStyle=d,c.fill()),n&&(c.strokeStyle=n,c.lineWidth=x,c.stroke())},O=t=>{const{x1:e,y1:o,cpx:i,cpy:l,x2:r,y2:d,color:n="#000",lineWidth:x=1,lineCap:c="butt",ctx:h}=t;h.beginPath(),h.moveTo(e,o),h.quadraticCurveTo(i,l,r,d),h.strokeStyle=n,h.lineWidth=x,h.lineCap=c,h.stroke()},$=t=>{const{x1:e,y1:o,r1:i,x2:l,y2:r,r2:d,colorStops:n,ctx:x}=t,c=x.createRadialGradient(e,o,i,l,r,d);return n.forEach(({offset:h,color:a})=>{c.addColorStop(h,a)}),c},M=t=>{const{x:e,y:o,width:i,height:l,ctx:r,fillColor:d,strokeColor:n,lineWidth:x=1}=t;r.beginPath(),r.rect(e,o,i,l),d&&(r.fillStyle=d,r.fill()),n&&(r.strokeStyle=n,r.lineWidth=x,r.stroke()),r.closePath()},G=t=>{const{x:e,y:o,width:i,height:l,radius:r,ctx:d,fillColor:n,strokeColor:x,lineWidth:c=1}=t,[h,a,f,g]=Array.isArray(r)?r:[r,r,r,r];d.beginPath(),d.moveTo(e+h,o),d.lineTo(e+i-a,o),d.arcTo(e+i,o,e+i,o+a,a),d.lineTo(e+i,o+l-f),d.arcTo(e+i,o+l,e+i-f,o+l,f),d.lineTo(e+g,o+l),d.arcTo(e,o+l,e,o+l-g,g),d.lineTo(e,o+h),d.arcTo(e,o,e+h,o,h),n&&(d.fillStyle=n,d.fill()),x&&(d.strokeStyle=x,d.lineWidth=c,d.stroke()),d.closePath()},H=t=>{const{text:e,x:o,y:i,width:l,lineHeight:r,font:d,fontSize:n,fontWeight:x,color:c,ctx:h}=t;h.font=`${x} ${n}px ${d}`,h.fillStyle=c;const a=e.split("");let f=0,g=0;for(let u=0;u<a.length;u++){const b=a.slice(g,u+1).join("");h.measureText(b).width<=l||(h.fillText(b,o,i+f*r),f++,g=u+1)}h.fillText(a.slice(g).join(""),o,i+f*r)},Y=t=>{const{ctx:e,canvas:o,x:i=0,y:l=0,width:r,height:d}=t,n=r??o.width,x=d??o.height;e.clearRect(i,l,n,x)},E=t=>{const{ctx:e,x:o,y:i,width:l,height:r}=t;e.beginPath(),e.rect(o,i,l,r),e.clip()},X=t=>{const{ctx:e,x:o,y:i,radius:l}=t;e.beginPath(),e.arc(o,i,l,0,Math.PI*2),e.clip()},F=t=>{const{ctx:e,path:o,fillRule:i="nonzero"}=t;e.clip(o,i)},_=async t=>{const{source:e,sx:o,sy:i,sw:l,sh:r,options:d}=t;return o!==void 0&&i!==void 0&&l!==void 0&&r!==void 0?createImageBitmap(e,o,i,l,r,d):createImageBitmap(e,d)},U=t=>{const{ctx:e,bitmap:o,dx:i,dy:l,dWidth:r,dHeight:d}=t;r!==void 0&&d!==void 0?e.drawImage(o,i,l,r,d):e.drawImage(o,i,l)},Q=async t=>{const o=await(await fetch(t)).blob();return createImageBitmap(o)},T=t=>{const{canvas:e,type:o="image/png",quality:i=.92}=t;return new Promise(l=>{e.toBlob(r=>{l(r)},o,i)})},q=async t=>{const{canvas:e,filename:o="canvas",type:i="image/png",quality:l}=t,r=await T({canvas:e,type:i,quality:l});if(!r)return!1;const d=URL.createObjectURL(r),n=document.createElement("a"),c={"image/png":"png","image/jpeg":"jpg","image/webp":"webp"}[i]||"png";return n.href=d,n.download=`${o}.${c}`,n.click(),URL.revokeObjectURL(d),!0},J=t=>{const{ctx:e,image:o,repetition:i="repeat",x:l,y:r,width:d,height:n}=t,x=e.createPattern(o,i);x&&(e.fillStyle=x,e.fillRect(l,r,d,n))},K=t=>{const{ctx:e,filter:o}=t;e.filter=o},V=t=>{t.filter="none"},Z={blur:t=>`blur(${t}px)`,brightness:t=>`brightness(${t}%)`,contrast:t=>`contrast(${t}%)`,grayscale:t=>`grayscale(${t}%)`,hueRotate:t=>`hue-rotate(${t}deg)`,invert:t=>`invert(${t}%)`,opacity:t=>`opacity(${t}%)`,saturate:t=>`saturate(${t}%)`,sepia:t=>`sepia(${t}%)`,dropShadow:(t,e,o,i)=>`drop-shadow(${t}px ${e}px ${o}px ${i})`},v=t=>{const{alpha:e,ctx:o}=t;o.globalAlpha=Math.max(0,Math.min(1,e))},tt=t=>{t.globalAlpha=1},et=t=>{const{operation:e,ctx:o}=t;o.globalCompositeOperation=e},ot=t=>{t.globalCompositeOperation="source-over"},it=t=>{const{ctx:e,x:o,y:i,path:l,fillRule:r="nonzero"}=t;return l?e.isPointInPath(l,o,i,r):e.isPointInPath(o,i,r)},lt=t=>{const{ctx:e,x:o,y:i,path:l}=t;return l?e.isPointInStroke(l,o,i):e.isPointInStroke(o,i)},rt=t=>{const{x:e,y:o,width:i,height:l,ctx:r}=t;return r.getImageData(e,o,i,l)},dt=t=>{const{imageData:e,x:o,y:i,ctx:l}=t;l.putImageData(e,o,i)},nt=t=>{const{el:e,width:o,height:i}=t,l=document.createElement("canvas");return l.width=o,l.height=i,e?.appendChild(l),l},st=t=>{const{ctx:e,segments:o,offset:i=0}=t;e.setLineDash(o),e.lineDashOffset=i},ct=t=>{t.setLineDash([]),t.lineDashOffset=0},xt=t=>{const{ctx:e,lineCap:o,lineJoin:i,miterLimit:l,lineWidth:r}=t;o&&(e.lineCap=o),i&&(e.lineJoin=i),l!==void 0&&(e.miterLimit=l),r!==void 0&&(e.lineWidth=r)},ht=t=>{t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.lineWidth=1},at=t=>{const{text:e,fontSize:o=14,font:i="Arial",fontWeight:l=400,ctx:r}=t,d=r.font;r.font=`${l} ${o}px ${i}`;const n=r.measureText(e);return r.font=d,{width:n.width,metrics:n}},ft=t=>{const{canvas:e,width:o,height:i,preserveContent:l=!1}=t;if(l){const r=e.getContext("2d"),d=r.getImageData(0,0,e.width,e.height);e.width=o,e.height=i,r.putImageData(d,0,0)}else e.width=o,e.height=i},yt=t=>{const{ctx:e,color:o="rgba(0, 0, 0, 0.5)",blur:i=10,offsetX:l=0,offsetY:r=0}=t;e.shadowColor=o,e.shadowBlur=i,e.shadowOffsetX=l,e.shadowOffsetY=r},gt=t=>{t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0},mt=t=>{const{ctx:e,a:o,b:i,c:l,d:r,e:d,f:n}=t;e.setTransform(o,i,l,r,d,n)},ut=t=>{const{ctx:e,a:o,b:i,c:l,d:r,e:d,f:n}=t;e.transform(o,i,l,r,d,n)},pt=t=>t.getTransform(),Ct=t=>{const{ctx:e,matrix:o}=t;e.setTransform(o)},wt=t=>{const{ctx:e,text:o,x:i,y:l,fontSize:r=14,font:d="sans-serif",fontWeight:n=400,color:x="#000",textAlign:c="left",textBaseline:h="top",maxWidth:a}=t;e.font=`${n} ${r}px ${d}`,e.fillStyle=x,e.textAlign=c,e.textBaseline=h,a!==void 0?e.fillText(o,i,l,a):e.fillText(o,i,l)},bt=t=>{const{ctx:e,text:o,x:i,y:l,fontSize:r=14,font:d="sans-serif",fontWeight:n=400,color:x="#000",lineWidth:c=1,textAlign:h="left",textBaseline:a="top",maxWidth:f}=t;e.font=`${n} ${r}px ${d}`,e.strokeStyle=x,e.lineWidth=c,e.textAlign=h,e.textBaseline=a,f!==void 0?e.strokeText(o,i,l,f):e.strokeText(o,i,l)},Tt=t=>{const{ctx:e,x:o,y:i}=t;e.translate(o,i)},St=t=>{const{ctx:e,angle:o}=t;e.rotate(o)},Rt=t=>t*Math.PI/180,kt=t=>{const{ctx:e,scaleX:o,scaleY:i}=t;e.scale(o,i)},Wt=t=>{t.save()},It=t=>{t.restore()},Pt=t=>{t.setTransform(1,0,0,1,0,0)};class m{canvasElement;ctx;constructor(e){this.canvasElement=nt(e),this.ctx=this.canvasElement.getContext("2d")}addImage=e=>A({...e,ctx:this.ctx});addClipImage=e=>P({...e,ctx:this.ctx});drawPattern=e=>J({...e,ctx:this.ctx});addText=e=>H({...e,ctx:this.ctx});measureText=e=>at({...e,ctx:this.ctx});addRect=e=>M({...e,ctx:this.ctx});addRoundRect=e=>G({...e,ctx:this.ctx});addCircle=e=>I({...e,ctx:this.ctx});addLine=e=>L({...e,ctx:this.ctx});addArc=e=>k({...e,ctx:this.ctx});addEllipse=e=>z({...e,ctx:this.ctx});addPolygon=e=>N({...e,ctx:this.ctx});addPath=e=>B({...e,ctx:this.ctx});addBezier=e=>W({...e,ctx:this.ctx});addQuadratic=e=>O({...e,ctx:this.ctx});addLinearGradient=e=>j({...e,ctx:this.ctx});addRadialGradient=e=>$({...e,ctx:this.ctx});addConicGradient=e=>D({...e,ctx:this.ctx});setShadow=e=>yt({...e,ctx:this.ctx});clearShadow=()=>gt(this.ctx);setGlobalAlpha=e=>v({alpha:e,ctx:this.ctx});resetGlobalAlpha=()=>tt(this.ctx);setCompositeOperation=e=>et({operation:e,ctx:this.ctx});resetCompositeOperation=()=>ot(this.ctx);setLineDash=e=>st({...e,ctx:this.ctx});clearLineDash=()=>ct(this.ctx);setLineStyle=e=>xt({...e,ctx:this.ctx});resetLineStyle=()=>ht(this.ctx);setFilter=e=>K({filter:e,ctx:this.ctx});clearFilter=()=>V(this.ctx);clipRect=e=>E({...e,ctx:this.ctx});clipCircle=e=>X({...e,ctx:this.ctx});clipPath=e=>F({...e,ctx:this.ctx});isPointInPath=e=>it({...e,ctx:this.ctx});isPointInStroke=e=>lt({...e,ctx:this.ctx});fillText=e=>wt({...e,ctx:this.ctx});strokeText=e=>bt({...e,ctx:this.ctx});getImageData=e=>rt({...e,ctx:this.ctx});putImageData=e=>dt({...e,ctx:this.ctx});drawImageBitmap=e=>U({...e,ctx:this.ctx});clear=e=>Y({...e,ctx:this.ctx,canvas:this.canvasElement});resize=e=>ft({...e,canvas:this.canvasElement});save=()=>Wt(this.ctx);restore=()=>It(this.ctx);resetTransform=()=>Pt(this.ctx);translate=e=>Tt({...e,ctx:this.ctx});rotate=e=>St({...e,ctx:this.ctx});scale=e=>kt({...e,ctx:this.ctx});setTransform=e=>mt({...e,ctx:this.ctx});transform=e=>ut({...e,ctx:this.ctx});getTransform=()=>pt(this.ctx);setTransformMatrix=e=>Ct({matrix:e,ctx:this.ctx});drawFocusIfNeeded=e=>R({...e,ctx:this.ctx});createBase64=(e,o)=>this.canvasElement.toDataURL(e||"image/png",o);toBlob=e=>T({...e,canvas:this.canvasElement});download=e=>q({...e,canvas:this.canvasElement});getContext=()=>this.ctx;getCanvas=()=>this.canvasElement;degToRad=Rt;filters=Z;createImageBitmap=_;loadImageBitmap=Q}const y=""+new URL("demo-q1-UcP0Q.png",import.meta.url).href,Dt=async t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),await t.addClipImage({url:y,x:30,y:60,width:80,height:80,clipType:"circle"}),await t.addClipImage({url:y,x:140,y:60,width:100,height:120,clipType:"roundRect",radius:15}),await t.addClipImage({url:y,x:270,y:60,width:100,height:120,clipType:"roundRect",radius:[20,5,20,5]}),t.addText({text:"圆形裁剪",x:30,y:200,width:100,fontSize:12,fontWeight:400,font:"Arial",lineHeight:16,color:"#666"}),t.addText({text:"圆角裁剪",x:150,y:200,width:100,fontSize:12,fontWeight:400,font:"Arial",lineHeight:16,color:"#666"}),t.addText({text:"独立圆角",x:280,y:200,width:100,fontSize:12,fontWeight:400,font:"Arial",lineHeight:16,color:"#666"})},zt=async t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),await t.addImage({url:y,x:20,y:20,width:100,height:100}),await t.addImage({url:y,x:140,y:20,width:100,height:100,sx:50,sy:50,sWidth:200,sHeight:200}),await t.addImage({url:y,x:260,y:20,width:100,height:100,sx:0,sy:0,sWidth:150,sHeight:150}),t.fillText({text:"整图绘制",x:35,y:135,fontSize:12,color:"#666"}),t.fillText({text:"裁剪中心",x:155,y:135,fontSize:12,color:"#666"}),t.fillText({text:"裁剪左上",x:275,y:135,fontSize:12,color:"#666"})},At=async t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"});const[e]=await C(y);e&&t.drawPattern({image:e,repetition:"repeat",x:20,y:20,width:300,height:200})},Lt=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.addArc({x:80,y:100,radius:50,startAngle:0,endAngle:Math.PI,strokeColor:"#667eea",lineWidth:3}),t.addArc({x:200,y:100,radius:50,startAngle:0,endAngle:Math.PI*1.5,fillColor:"#f093fb",closePath:!0}),t.addArc({x:320,y:100,radius:50,startAngle:-Math.PI/2,endAngle:Math.PI/4,fillColor:"#4facfe",strokeColor:"#00f2fe",lineWidth:2,closePath:!0}),t.addArc({x:200,y:230,radius:40,startAngle:-Math.PI/2,endAngle:Math.PI,strokeColor:"#e0e0e0",lineWidth:8}),t.addArc({x:200,y:230,radius:40,startAngle:-Math.PI/2,endAngle:Math.PI*.25,strokeColor:"#667eea",lineWidth:8})},jt=t=>{t.clear(),t.addCircle({x:100,y:100,radius:50,fillColor:"#e74c3c"}),t.addCircle({x:250,y:100,radius:50,strokeColor:"#3498db",lineWidth:4}),t.addCircle({x:175,y:200,radius:40,fillColor:"#2ecc71",strokeColor:"#27ae60",lineWidth:3})},Bt=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.addEllipse({x:80,y:100,radiusX:60,radiusY:40,fillColor:"#667eea"}),t.addEllipse({x:200,y:100,radiusX:50,radiusY:30,strokeColor:"#f093fb",lineWidth:3}),t.addEllipse({x:320,y:100,radiusX:50,radiusY:25,rotation:Math.PI/4,fillColor:"#4facfe",strokeColor:"#00f2fe",lineWidth:2}),t.addEllipse({x:200,y:220,radiusX:80,radiusY:50,fillColor:"rgba(102, 126, 234, 0.3)",strokeColor:"#667eea",lineWidth:2}),t.addEllipse({x:200,y:220,radiusX:50,radiusY:30,fillColor:"rgba(240, 147, 251, 0.5)"})},Nt=t=>{t.clear(),t.addLine({x1:50,y1:50,x2:350,y2:50,color:"#3498db",lineWidth:2}),t.addLine({x1:50,y1:100,x2:350,y2:100,color:"#e74c3c",lineWidth:5,lineCap:"round"}),t.addLine({x1:50,y1:150,x2:350,y2:150,color:"#2ecc71",lineWidth:2,lineDash:[10,5]}),t.addLine({x1:50,y1:200,x2:350,y2:200,color:"#9b59b6",lineWidth:3,lineDash:[2,8]}),t.addLine({x1:50,y1:250,x2:350,y2:220,color:"#f39c12",lineWidth:2})},Ot=t=>{t.clear(),t.addPath({commands:[{type:"moveTo",x:50,y:50},{type:"lineTo",x:150,y:50},{type:"lineTo",x:100,y:130},{type:"closePath"}],fillColor:"#3498db",strokeColor:"#2980b9",lineWidth:2}),t.addPath({commands:[{type:"moveTo",x:200,y:90},{type:"lineTo",x:280,y:90},{type:"lineTo",x:260,y:70},{type:"moveTo",x:280,y:90},{type:"lineTo",x:260,y:110}],strokeColor:"#e74c3c",lineWidth:3}),t.addPath({commands:[{type:"moveTo",x:350,y:50},{type:"lineTo",x:360,y:80},{type:"lineTo",x:390,y:80},{type:"lineTo",x:365,y:100},{type:"lineTo",x:375,y:130},{type:"lineTo",x:350,y:110},{type:"lineTo",x:325,y:130},{type:"lineTo",x:335,y:100},{type:"lineTo",x:310,y:80},{type:"lineTo",x:340,y:80},{type:"closePath"}],fillColor:"#f1c40f",strokeColor:"#f39c12",lineWidth:2})},$t=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.addPolygon({x:60,y:80,radius:40,sides:3,fillColor:"#667eea"}),t.addPolygon({x:140,y:80,radius:35,sides:4,rotation:Math.PI/4,fillColor:"#f093fb"}),t.addPolygon({x:220,y:80,radius:40,sides:5,fillColor:"#4facfe"}),t.addPolygon({x:300,y:80,radius:40,sides:6,strokeColor:"#00f2fe",lineWidth:3}),t.addPolygon({x:100,y:200,radius:45,sides:8,fillColor:"rgba(102, 126, 234, 0.5)",strokeColor:"#667eea",lineWidth:2}),t.addPolygon({x:200,y:200,radius:45,sides:12,fillColor:"#f5576c"}),t.addPolygon({x:300,y:200,radius:45,sides:3,fillColor:"rgba(79, 172, 254, 0.6)"}),t.addPolygon({x:300,y:200,radius:45,sides:3,rotation:Math.PI,fillColor:"rgba(240, 147, 251, 0.6)"})},Mt=t=>{t.clear(),t.addRect({x:50,y:50,width:120,height:80,fillColor:"#3498db"}),t.addRect({x:200,y:50,width:120,height:80,strokeColor:"#e74c3c",lineWidth:3}),t.addRect({x:50,y:160,width:120,height:80,fillColor:"#2ecc71",strokeColor:"#27ae60",lineWidth:2})},Gt=t=>{t.clear(),t.addRoundRect({x:50,y:50,width:120,height:80,radius:15,fillColor:"#9b59b6"}),t.addRoundRect({x:200,y:50,width:120,height:80,radius:[30,10,30,10],fillColor:"#f39c12"}),t.addRoundRect({x:50,y:160,width:120,height:80,radius:20,strokeColor:"#1abc9c",lineWidth:3})},Ht=t=>{t.clear(),t.addText({text:"Hello Canvas!",x:50,y:50,width:300,lineHeight:30,font:"Arial",fontSize:24,fontWeight:700,color:"#333"}),t.addText({text:"这是一段自动换行的中文文本，当文字超过设定宽度时会自动换行显示。",x:50,y:100,width:300,lineHeight:24,font:"Arial",fontSize:16,fontWeight:400,color:"#666"})},Yt=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.addBezier({x1:50,y1:150,cp1x:100,cp1y:50,cp2x:200,cp2y:250,x2:250,y2:150,color:"#667eea",lineWidth:3}),t.addBezier({x1:280,y1:80,cp1x:350,cp1y:80,cp2x:280,cp2y:220,x2:350,y2:220,color:"#f093fb",lineWidth:3,lineCap:"round"}),t.addCircle({x:50,y:150,radius:4,fillColor:"#667eea"}),t.addCircle({x:100,y:50,radius:4,fillColor:"#aaa"}),t.addCircle({x:200,y:250,radius:4,fillColor:"#aaa"}),t.addCircle({x:250,y:150,radius:4,fillColor:"#667eea"}),t.addLine({x1:50,y1:150,x2:100,y2:50,color:"#ddd",lineWidth:1}),t.addLine({x1:250,y1:150,x2:200,y2:250,color:"#ddd",lineWidth:1})},Et=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.addQuadratic({x1:50,y1:200,cpx:150,cpy:50,x2:250,y2:200,color:"#667eea",lineWidth:3}),t.addQuadratic({x1:50,y1:250,cpx:100,cpy:220,x2:150,y2:250,color:"#4facfe",lineWidth:2}),t.addQuadratic({x1:150,y1:250,cpx:200,cpy:280,x2:250,y2:250,color:"#4facfe",lineWidth:2}),t.addQuadratic({x1:250,y1:250,cpx:300,cpy:220,x2:350,y2:250,color:"#4facfe",lineWidth:2}),t.addCircle({x:50,y:200,radius:4,fillColor:"#667eea"}),t.addCircle({x:150,y:50,radius:4,fillColor:"#aaa"}),t.addCircle({x:250,y:200,radius:4,fillColor:"#667eea"}),t.addLine({x1:50,y1:200,x2:150,y2:50,color:"#ddd",lineWidth:1}),t.addLine({x1:250,y1:200,x2:150,y2:50,color:"#ddd",lineWidth:1})},Xt=t=>{t.clear(),t.addConicGradient({startAngle:0,x:100,y:100,colorStops:[{offset:0,color:"#ff0000"},{offset:.17,color:"#ff8000"},{offset:.33,color:"#ffff00"},{offset:.5,color:"#00ff00"},{offset:.67,color:"#0080ff"},{offset:.83,color:"#8000ff"},{offset:1,color:"#ff0000"}],fillX:20,fillY:20,fillWidth:160,fillHeight:160}),t.addConicGradient({startAngle:-Math.PI/2,x:300,y:100,colorStops:[{offset:0,color:"#3498db"},{offset:.3,color:"#3498db"},{offset:.3,color:"#e74c3c"},{offset:.55,color:"#e74c3c"},{offset:.55,color:"#2ecc71"},{offset:.8,color:"#2ecc71"},{offset:.8,color:"#f1c40f"},{offset:1,color:"#f1c40f"}],fillX:220,fillY:20,fillWidth:160,fillHeight:160}),t.save(),t.clipCircle({x:300,y:100,radius:70}),t.addConicGradient({startAngle:-Math.PI/2,x:300,y:100,colorStops:[{offset:0,color:"#3498db"},{offset:.3,color:"#3498db"},{offset:.3,color:"#e74c3c"},{offset:.55,color:"#e74c3c"},{offset:.55,color:"#2ecc71"},{offset:.8,color:"#2ecc71"},{offset:.8,color:"#f1c40f"},{offset:1,color:"#f1c40f"}],fillX:220,fillY:20,fillWidth:160,fillHeight:160}),t.restore(),t.fillText({text:"彩虹渐变",x:60,y:200,fontSize:12,color:"#666"}),t.fillText({text:"饼图效果",x:260,y:200,fontSize:12,color:"#666"})},Ft=t=>{const e=t.getContext();t.clear();const o=t.addLinearGradient({x1:50,y1:0,x2:350,y2:0,colorStops:[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}]});e.fillStyle=o,e.fillRect(50,30,300,80);const i=t.addLinearGradient({x1:0,y1:130,x2:0,y2:210,colorStops:[{offset:0,color:"#f093fb"},{offset:1,color:"#f5576c"}]});e.fillStyle=i,e.fillRect(50,130,300,80);const l=t.addLinearGradient({x1:50,y1:0,x2:350,y2:0,colorStops:[{offset:0,color:"#ff6b6b"},{offset:.5,color:"#feca57"},{offset:1,color:"#48dbfb"}]});e.fillStyle=l,e.fillRect(50,230,300,50)},_t=t=>{const e=t.getContext();t.clear();const o=t.addRadialGradient({x1:150,y1:100,r1:0,x2:150,y2:100,r2:80,colorStops:[{offset:0,color:"#fff"},{offset:1,color:"#3498db"}]});e.fillStyle=o,e.beginPath(),e.arc(150,100,80,0,Math.PI*2),e.fill();const i=t.addRadialGradient({x1:280,y1:80,r1:10,x2:300,y2:100,r2:80,colorStops:[{offset:0,color:"#fff"},{offset:.5,color:"#e74c3c"},{offset:1,color:"#c0392b"}]});e.fillStyle=i,e.beginPath(),e.arc(300,100,80,0,Math.PI*2),e.fill();const l=t.addRadialGradient({x1:200,y1:240,r1:0,x2:200,y2:240,r2:150,colorStops:[{offset:0,color:"#f39c12"},{offset:1,color:"#2ecc71"}]});e.fillStyle=l,e.fillRect(50,200,300,80)},Ut=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.setCompositeOperation("source-over"),t.addCircle({x:60,y:80,radius:30,fillColor:"#667eea"}),t.addCircle({x:80,y:80,radius:30,fillColor:"#f093fb"}),t.setCompositeOperation("multiply"),t.addCircle({x:160,y:80,radius:30,fillColor:"#667eea"}),t.addCircle({x:180,y:80,radius:30,fillColor:"#f093fb"}),t.resetCompositeOperation(),t.addCircle({x:260,y:80,radius:30,fillColor:"#667eea"}),t.setCompositeOperation("screen"),t.addCircle({x:280,y:80,radius:30,fillColor:"#f093fb"}),t.resetCompositeOperation(),t.addCircle({x:360,y:80,radius:30,fillColor:"#667eea"}),t.setCompositeOperation("difference"),t.addCircle({x:380,y:80,radius:30,fillColor:"#f093fb"}),t.resetCompositeOperation(),t.addRect({x:40,y:160,width:80,height:80,fillColor:"#4facfe"}),t.setCompositeOperation("destination-out"),t.addCircle({x:80,y:200,radius:25,fillColor:"#000"}),t.resetCompositeOperation(),t.addCircle({x:180,y:200,radius:35,fillColor:"#667eea"}),t.setCompositeOperation("xor"),t.addCircle({x:210,y:200,radius:35,fillColor:"#f093fb"}),t.resetCompositeOperation(),t.addRect({x:280,y:160,width:80,height:80,fillColor:"#667eea"}),t.setCompositeOperation("overlay"),t.addRect({x:300,y:180,width:80,height:80,fillColor:"#f093fb"}),t.resetCompositeOperation()},Qt=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.setGlobalAlpha(1),t.addRect({x:50,y:50,width:80,height:80,fillColor:"#667eea"}),t.setGlobalAlpha(.75),t.addRect({x:100,y:80,width:80,height:80,fillColor:"#f093fb"}),t.setGlobalAlpha(.5),t.addRect({x:150,y:110,width:80,height:80,fillColor:"#4facfe"}),t.setGlobalAlpha(.25),t.addRect({x:200,y:140,width:80,height:80,fillColor:"#f5576c"}),t.resetGlobalAlpha();for(let e=0;e<10;e++)t.setGlobalAlpha((10-e)/10),t.addCircle({x:320,y:80+e*20,radius:15,fillColor:"#667eea"});t.resetGlobalAlpha()},qt=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#ecf0f1"}),t.setShadow({color:"rgba(0, 0, 0, 0.3)",blur:15,offsetX:5,offsetY:5}),t.addRoundRect({x:50,y:50,width:120,height:80,radius:10,fillColor:"#fff"}),t.addCircle({x:280,y:90,radius:50,fillColor:"#fff"}),t.clearShadow(),t.addRect({x:50,y:180,width:300,height:60,fillColor:"#3498db"}),t.addText({text:"上方有阴影，下方无阴影",x:100,y:265,width:200,lineHeight:20,font:"Arial",fontSize:14,fontWeight:400,color:"#666"})},Jt=t=>{t.clear(),t.setLineDash({segments:[10,5]}),t.addLine({startX:30,startY:30,endX:370,endY:30,strokeColor:"#3498db",lineWidth:2}),t.setLineDash({segments:[2,5]}),t.addLine({startX:30,startY:70,endX:370,endY:70,strokeColor:"#e74c3c",lineWidth:2}),t.setLineDash({segments:[15,5,5,5]}),t.addLine({startX:30,startY:110,endX:370,endY:110,strokeColor:"#2ecc71",lineWidth:2}),t.setLineDash({segments:[10,10],offset:5}),t.addLine({startX:30,startY:150,endX:370,endY:150,strokeColor:"#9b59b6",lineWidth:2}),t.setLineDash({segments:[8,4]}),t.addRect({x:50,y:180,width:120,height:80,strokeColor:"#f39c12",lineWidth:2}),t.addCircle({x:280,y:220,radius:40,strokeColor:"#1abc9c",lineWidth:2}),t.clearLineDash()},Kt=t=>{t.clear(),["butt","round","square"].forEach((l,r)=>{t.setLineStyle({lineCap:l,lineWidth:15}),t.addLine({startX:50,startY:40+r*50,endX:150,endY:40+r*50,strokeColor:"#3498db"}),t.fillText({text:l,x:160,y:35+r*50,fontSize:12,color:"#666"})}),["miter","round","bevel"].forEach((l,r)=>{t.setLineStyle({lineJoin:l,lineWidth:10,lineCap:"butt"});const d=250+r*70;t.addPath({commands:[{type:"moveTo",x:d,y:60},{type:"lineTo",x:d+25,y:20},{type:"lineTo",x:d+50,y:60}],strokeColor:"#e74c3c",lineWidth:10}),t.fillText({text:l,x:d,y:70,fontSize:12,color:"#666"})}),t.resetLineStyle(),[1,2,4,8,12].forEach((l,r)=>{t.setLineStyle({lineWidth:l}),t.addLine({startX:50,startY:200+r*20,endX:350,endY:200+r*20,strokeColor:"#2ecc71"})}),t.resetLineStyle()},Vt=async t=>{t.clear(),await t.addImage({url:y,x:10,y:10,width:80,height:80}),t.fillText({text:"原图",x:30,y:95,fontSize:10,color:"#666"}),t.setFilter(m.filters.blur(3)),await t.addImage({url:y,x:110,y:10,width:80,height:80}),t.clearFilter(),t.fillText({text:"模糊",x:130,y:95,fontSize:10,color:"#666"}),t.setFilter(m.filters.grayscale(100)),await t.addImage({url:y,x:210,y:10,width:80,height:80}),t.clearFilter(),t.fillText({text:"灰度",x:230,y:95,fontSize:10,color:"#666"}),t.setFilter(m.filters.sepia(100)),await t.addImage({url:y,x:310,y:10,width:80,height:80}),t.clearFilter(),t.fillText({text:"棕褐",x:330,y:95,fontSize:10,color:"#666"}),t.setFilter(m.filters.brightness(150)),await t.addImage({url:y,x:10,y:120,width:80,height:80}),t.clearFilter(),t.fillText({text:"亮度+",x:30,y:205,fontSize:10,color:"#666"}),t.setFilter(m.filters.contrast(200)),await t.addImage({url:y,x:110,y:120,width:80,height:80}),t.clearFilter(),t.fillText({text:"对比度",x:125,y:205,fontSize:10,color:"#666"}),t.setFilter(m.filters.invert(100)),await t.addImage({url:y,x:210,y:120,width:80,height:80}),t.clearFilter(),t.fillText({text:"反色",x:230,y:205,fontSize:10,color:"#666"}),t.setFilter(m.filters.hueRotate(180)),await t.addImage({url:y,x:310,y:120,width:80,height:80}),t.clearFilter(),t.fillText({text:"色相",x:330,y:205,fontSize:10,color:"#666"})},Zt=async t=>{t.clear();const[e]=await C(y);if(!e)return;const o=t.ctx;t.save(),t.clipRect({x:20,y:20,width:100,height:100}),o.drawImage(e,20,20,150,150),t.restore(),t.save(),t.clipCircle({x:220,y:70,radius:50}),o.drawImage(e,170,20,100,100),t.restore(),t.save();const i=new Path2D,l=370,r=70,d=50;for(let n=0;n<5;n++){const x=n*4*Math.PI/5-Math.PI/2,c=l+d*Math.cos(x),h=r+d*Math.sin(x);n===0?i.moveTo(c,h):i.lineTo(c,h)}i.closePath(),t.clipPath({path:i}),o.drawImage(e,320,20,100,100),t.restore(),t.fillText({text:"矩形裁剪",x:40,y:130,fontSize:12,color:"#666"}),t.fillText({text:"圆形裁剪",x:190,y:130,fontSize:12,color:"#666"}),t.fillText({text:"星形裁剪",x:340,y:130,fontSize:12,color:"#666"})},{action:vt}=__STORYBOOK_MODULE_ACTIONS__,te=t=>{t.clear();const e=t.ctx;e.beginPath(),e.arc(100,100,50,0,Math.PI*2),e.fillStyle="#3498db",e.fill(),e.strokeStyle="#2980b9",e.lineWidth=3,e.stroke(),e.beginPath(),e.rect(200,50,100,100),e.fillStyle="#e74c3c",e.fill(),e.strokeStyle="#c0392b",e.lineWidth=3,e.stroke();const o=[{x:100,y:100,label:"圆心"},{x:150,y:100,label:"圆边缘"},{x:180,y:100,label:"圆外"},{x:250,y:100,label:"矩形内"},{x:200,y:100,label:"矩形边"}],i=[];o.forEach((l,r)=>{e.beginPath(),e.arc(l.x,l.y,4,0,Math.PI*2),e.fillStyle="#2ecc71",e.fill(),e.beginPath(),e.arc(100,100,50,0,Math.PI*2);const d=e.isPointInPath(l.x,l.y),n=e.isPointInStroke(l.x,l.y);e.beginPath(),e.rect(200,50,100,100);const x=e.isPointInPath(l.x,l.y),c=d?"圆内":n?"圆边":x?"矩形内":"外部";i.push(`${l.label}(${l.x},${l.y}): ${c}`),t.fillText({text:`${l.label}: ${c}`,x:20,y:180+r*20,fontSize:12,color:"#333"})}),vt("hitTest")(...i)},ee=async t=>{t.clear(),t.fillText({text:"加载 ImageBitmap...",x:20,y:20,fontSize:14,color:"#666"});try{const e=await m.loadImageBitmap(y);t.clear(),t.drawImageBitmap({bitmap:e,dx:20,dy:20}),t.fillText({text:"原始尺寸",x:20,y:130,fontSize:10,color:"#666"}),t.drawImageBitmap({bitmap:e,dx:150,dy:20,dWidth:80,dHeight:80}),t.fillText({text:"80x80",x:170,y:110,fontSize:10,color:"#666"});const o=await m.createImageBitmap({source:e,sx:0,sy:0,sw:e.width/2,sh:e.height/2});t.drawImageBitmap({bitmap:o,dx:260,dy:20,dWidth:100,dHeight:100}),t.fillText({text:"裁剪后",x:280,y:130,fontSize:10,color:"#666"}),e.close(),o.close(),t.fillText({text:"ImageBitmap 比 Image 更高效，适合频繁绑制",x:20,y:170,fontSize:12,color:"#999"})}catch(e){t.fillText({text:"加载失败: "+String(e),x:20,y:50,fontSize:12,color:"#e74c3c"})}},{action:oe}=__STORYBOOK_MODULE_ACTIONS__,ie=async t=>{t.clear(),await t.addImage({url:y,x:20,y:20,width:100,height:100}),t.fillText({text:"原图",x:50,y:130,fontSize:12,color:"#666"});const e=t.getImageData({x:20,y:20,width:100,height:100});oe("getImageData")(`获取 100x100 区域，共 ${e.data.length} 字节像素数据`),t.putImageData({imageData:e,x:140,y:20}),t.fillText({text:"复制",x:170,y:130,fontSize:12,color:"#666"});const o=t.getImageData({x:20,y:20,width:100,height:100}),i=o.data;for(let d=0;d<i.length;d+=4)i[d]=255-i[d],i[d+1]=255-i[d+1],i[d+2]=255-i[d+2];t.putImageData({imageData:o,x:260,y:20}),t.fillText({text:"反色",x:290,y:130,fontSize:12,color:"#666"});const l=t.getImageData({x:140,y:20,width:100,height:100}),r=l.data;for(let d=0;d<r.length;d+=4){const n=(r[d]+r[d+1]+r[d+2])/3;r[d]=n,r[d+1]=n,r[d+2]=n}t.putImageData({imageData:l,x:380,y:20}),t.fillText({text:"灰度",x:410,y:130,fontSize:12,color:"#666"})},{action:le}=__STORYBOOK_MODULE_ACTIONS__,re=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"});const e="Hello Canvas!",o="你好，Canvas！",i="Measure Text Width",l=t.measureText({text:e,fontSize:20,font:"Arial"}),r=t.measureText({text:o,fontSize:20,font:"Arial"}),d=t.measureText({text:i,fontSize:16,font:"Arial",fontWeight:"bold"});le("measureText")(`"${e}" width: ${l.width.toFixed(2)}px`,`"${o}" width: ${r.width.toFixed(2)}px`,`"${i}" width: ${d.width.toFixed(2)}px`);const n=60;t.addText({text:e,x:50,y:n,width:300,fontSize:20,font:"Arial",fontWeight:400,lineHeight:24,color:"#333"}),t.addLine({x1:50,y1:n+5,x2:50+l.width,y2:n+5,color:"#667eea",lineWidth:2});const x=120;t.addText({text:o,x:50,y:x,width:300,fontSize:20,font:"Arial",fontWeight:400,lineHeight:24,color:"#333"}),t.addLine({x1:50,y1:x+5,x2:50+r.width,y2:x+5,color:"#f093fb",lineWidth:2});const c=180;t.addText({text:i,x:50,y:c,width:300,fontSize:16,font:"Arial",fontWeight:700,lineHeight:20,color:"#333"}),t.addLine({x1:50,y1:c+5,x2:50+d.width,y2:c+5,color:"#4facfe",lineWidth:2});const h="Centered Text",f=(400-t.measureText({text:h,fontSize:18,font:"Arial"}).width)/2;t.addText({text:h,x:f,y:250,width:200,fontSize:18,font:"Arial",fontWeight:400,lineHeight:22,color:"#667eea"})},de=t=>{t.clear(),t.fillText({text:"fillText 填充文本",x:20,y:30,fontSize:20,color:"#3498db",fontWeight:"bold"}),t.fillText({text:"不同字体大小",x:20,y:70,fontSize:14,color:"#666"}),t.fillText({text:"限制最大宽度的长文本会被压缩...",x:20,y:100,fontSize:14,color:"#333",maxWidth:150}),t.strokeText({text:"strokeText",x:20,y:150,fontSize:30,color:"#e74c3c",lineWidth:2});const e=200;t.addLine({startX:200,startY:e-20,endX:200,endY:e+50,strokeColor:"#ddd",lineWidth:1}),t.fillText({text:"left",x:200,y:e,fontSize:14,color:"#9b59b6",textAlign:"left"}),t.fillText({text:"center",x:200,y:e+20,fontSize:14,color:"#9b59b6",textAlign:"center"}),t.fillText({text:"right",x:200,y:e+40,fontSize:14,color:"#9b59b6",textAlign:"right"}),t.strokeText({text:"OUTLINE",x:250,y:100,fontSize:36,color:"#2ecc71",lineWidth:3}),t.fillText({text:"OUTLINE",x:250,y:100,fontSize:36,color:"#fff"})},ne=t=>{t.addRect({x:0,y:0,width:500,height:350,fillColor:"#3498db"}),t.addCircle({x:200,y:150,radius:80,fillColor:"#e74c3c"}),setTimeout(()=>{t.clear(),t.addText({text:"画布已清空",x:130,y:140,width:200,lineHeight:30,font:"Arial",fontSize:20,fontWeight:700,color:"#333"})},1e3)},se=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#2ecc71"}),t.addText({text:"1秒后调整尺寸",x:120,y:140,width:200,lineHeight:30,font:"Arial",fontSize:18,fontWeight:700,color:"#fff"}),setTimeout(()=>{t.resize({width:300,height:200}),t.addRect({x:0,y:0,width:300,height:200,fillColor:"#9b59b6"}),t.addText({text:"尺寸已调整为 300x200",x:50,y:90,width:200,lineHeight:24,font:"Arial",fontSize:14,fontWeight:700,color:"#fff"}),setTimeout(()=>{t.resize({width:500,height:350}),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}),t.addText({text:"尺寸已恢复为 400x300",x:100,y:140,width:200,lineHeight:24,font:"Arial",fontSize:14,fontWeight:700,color:"#333"})},2e3)},1e3)},ce=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#ecf0f1"}),t.addRect({x:50,y:100,width:60,height:40,fillColor:"#3498db"}),t.save(),t.translate({x:180,y:120}),t.rotate({angle:m.degToRad(30)}),t.addRect({x:-30,y:-20,width:60,height:40,fillColor:"#e74c3c"}),t.restore(),t.save(),t.translate({x:300,y:120}),t.rotate({angle:m.degToRad(45)}),t.addRect({x:-30,y:-20,width:60,height:40,fillColor:"#2ecc71"}),t.restore(),t.save(),t.translate({x:180,y:230}),t.rotate({angle:m.degToRad(90)}),t.addRect({x:-30,y:-20,width:60,height:40,fillColor:"#9b59b6"}),t.restore(),t.addText({text:"0°       30°      45°      90°",x:40,y:270,width:350,lineHeight:20,font:"Arial",fontSize:14,fontWeight:400,color:"#333"})},xe=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#ecf0f1"}),t.save(),t.translate({x:100,y:100}),t.rotate({angle:m.degToRad(20)}),t.addRect({x:-30,y:-20,width:60,height:40,fillColor:"#3498db"}),t.restore(),t.save(),t.translate({x:250,y:100}),t.scale({scaleX:1.5,scaleY:1.5}),t.addRect({x:-30,y:-20,width:60,height:40,fillColor:"#e74c3c"}),t.restore(),t.addRect({x:150,y:200,width:100,height:60,fillColor:"#2ecc71"}),t.addText({text:"save/restore 保持状态独立",x:100,y:280,width:200,lineHeight:20,font:"Arial",fontSize:14,fontWeight:400,color:"#333"})},he=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#ecf0f1"}),t.save(),t.translate({x:60,y:80}),t.addRect({x:-25,y:-20,width:50,height:40,fillColor:"#3498db"}),t.restore(),t.save(),t.translate({x:160,y:80}),t.scale({scaleX:1.5,scaleY:1.5}),t.addRect({x:-25,y:-20,width:50,height:40,fillColor:"#e74c3c"}),t.restore(),t.save(),t.translate({x:280,y:80}),t.scale({scaleX:.5,scaleY:.5}),t.addRect({x:-25,y:-20,width:50,height:40,fillColor:"#2ecc71"}),t.restore(),t.save(),t.translate({x:100,y:200}),t.scale({scaleX:2,scaleY:1}),t.addRect({x:-25,y:-20,width:50,height:40,fillColor:"#9b59b6"}),t.restore(),t.save(),t.translate({x:280,y:200}),t.scale({scaleX:1,scaleY:2}),t.addRect({x:-25,y:-20,width:50,height:40,fillColor:"#f39c12"}),t.restore(),t.addText({text:"1x      1.5x     0.5x     2x横    1x纵x2",x:20,y:270,width:380,lineHeight:20,font:"Arial",fontSize:12,fontWeight:400,color:"#333"})},ae=t=>{t.clear(),t.addRect({x:20,y:20,width:60,height:40,fillColor:"#3498db"}),t.fillText({text:"原始",x:30,y:70,fontSize:10,color:"#666"}),t.setTransform({a:1.5,b:0,c:0,d:1.5,e:120,f:10}),t.addRect({x:0,y:0,width:60,height:40,fillColor:"#e74c3c"}),t.resetTransform(),t.fillText({text:"缩放 1.5x",x:120,y:70,fontSize:10,color:"#666"}),t.setTransform({a:1,b:.3,c:0,d:1,e:250,f:20}),t.addRect({x:0,y:0,width:60,height:40,fillColor:"#2ecc71"}),t.resetTransform(),t.fillText({text:"倾斜",x:260,y:70,fontSize:10,color:"#666"}),t.setTransform({a:1.2,b:.2,c:-.2,d:1.2,e:60,f:130}),t.addRect({x:0,y:0,width:60,height:40,fillColor:"#9b59b6"}),t.resetTransform(),t.fillText({text:"组合变换",x:50,y:200,fontSize:10,color:"#666"}),t.setTransform({a:2,b:0,c:0,d:2,e:180,f:100});const e=t.getTransform();t.addRect({x:0,y:0,width:60,height:40,fillColor:"#f39c12"}),t.resetTransform(),t.fillText({text:`a=${e.a}, d=${e.d}`,x:180,y:200,fontSize:10,color:"#666"})},fe=t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#ecf0f1"}),t.addRect({x:20,y:20,width:60,height:40,fillColor:"#3498db"}),t.addText({text:"原始",x:30,y:75,width:50,lineHeight:16,font:"Arial",fontSize:12,fontWeight:400,color:"#333"}),t.save(),t.translate({x:100,y:50}),t.addRect({x:20,y:20,width:60,height:40,fillColor:"#e74c3c"}),t.addText({text:"平移(100,50)",x:10,y:75,width:80,lineHeight:16,font:"Arial",fontSize:12,fontWeight:400,color:"#333"}),t.restore(),t.save(),t.translate({x:250,y:100}),t.addRect({x:20,y:20,width:60,height:40,fillColor:"#2ecc71"}),t.addText({text:"平移(250,100)",x:5,y:75,width:90,lineHeight:16,font:"Arial",fontSize:12,fontWeight:400,color:"#333"}),t.restore()},ye=t=>{t.clear();const e=t.addLinearGradient({x1:0,y1:0,x2:400,y2:300,colorStops:[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}]});t.getContext().fillStyle=e,t.getContext().fillRect(0,0,400,300),t.addText({text:"createBase64 导出示例",x:80,y:130,width:240,lineHeight:30,font:"Arial",fontSize:20,fontWeight:700,color:"#fff"});const o=t.createBase64();console.log("Base64 (前100字符):",o.slice(0,100)),alert("Base64 已输出到控制台")},ge=async t=>{t.clear();const e=t.addLinearGradient({x1:0,y1:0,x2:400,y2:300,colorStops:[{offset:0,color:"#ff6b6b"},{offset:.5,color:"#feca57"},{offset:1,color:"#48dbfb"}]});t.getContext().fillStyle=e,t.getContext().fillRect(0,0,400,300),t.addText({text:"Canvas Download Demo",x:70,y:130,width:260,lineHeight:30,font:"Arial",fontSize:22,fontWeight:700,color:"#fff"}),await t.download({filename:"canvas-demo",type:"image/png"})},me=async t=>{t.clear(),t.addRect({x:0,y:0,width:500,height:350,fillColor:"#2ecc71"}),t.addText({text:"toBlob 导出示例",x:100,y:130,width:200,lineHeight:30,font:"Arial",fontSize:20,fontWeight:700,color:"#fff"});const e=await t.toBlob({type:"image/png"});console.log("Blob:",e),alert(`Blob 大小: ${e?.size} bytes`)},S=()=>{const t=w.useRef(null),e=w.useRef(null);w.useEffect(()=>{t.current&&!e.current&&(e.current=new m({el:t.current,width:500,height:350}),e.current.addRect({x:0,y:0,width:500,height:350,fillColor:"#f5f5f5"}))},[]);const o=()=>e.current;return s.jsxs("div",{style:{padding:20},children:[s.jsx("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:"Canvas 画布"}),s.jsx("div",{ref:t,style:{border:"1px solid #ddd",borderRadius:8,overflow:"hidden",display:"inline-block",marginBottom:20,lineHeight:0}}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"图像"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>zt(o()),children:"addImage"}),s.jsx("div",{className:"button",onClick:()=>Dt(o()),children:"addClipImage"}),s.jsx("div",{className:"button",onClick:()=>At(o()),children:"drawPattern"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"基础图形"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>Mt(o()),children:"addRect"}),s.jsx("div",{className:"button",onClick:()=>Gt(o()),children:"addRoundRect"}),s.jsx("div",{className:"button",onClick:()=>jt(o()),children:"addCircle"}),s.jsx("div",{className:"button",onClick:()=>Nt(o()),children:"addLine"}),s.jsx("div",{className:"button",onClick:()=>Lt(o()),children:"addArc"}),s.jsx("div",{className:"button",onClick:()=>Bt(o()),children:"addEllipse"}),s.jsx("div",{className:"button",onClick:()=>$t(o()),children:"addPolygon"}),s.jsx("div",{className:"button",onClick:()=>Ot(o()),children:"addPath"}),s.jsx("div",{className:"button",onClick:()=>Ht(o()),children:"addText"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"曲线"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>Yt(o()),children:"addBezier"}),s.jsx("div",{className:"button",onClick:()=>Et(o()),children:"addQuadratic"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"渐变与样式"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>Ft(o()),children:"addLinearGradient"}),s.jsx("div",{className:"button",onClick:()=>_t(o()),children:"addRadialGradient"}),s.jsx("div",{className:"button",onClick:()=>Xt(o()),children:"addConicGradient"}),s.jsx("div",{className:"button",onClick:()=>qt(o()),children:"setShadow / clearShadow"}),s.jsx("div",{className:"button",onClick:()=>Qt(o()),children:"setGlobalAlpha"}),s.jsx("div",{className:"button",onClick:()=>Ut(o()),children:"setCompositeOperation"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"线条样式"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>Jt(o()),children:"setLineDash"}),s.jsx("div",{className:"button",onClick:()=>Kt(o()),children:"setLineStyle"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"滤镜"}),s.jsx("div",{children:s.jsx("div",{className:"button",onClick:()=>Vt(o()),children:"setFilter"})}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"裁剪"}),s.jsx("div",{children:s.jsx("div",{className:"button",onClick:()=>Zt(o()),children:"clip (矩形/圆形/路径)"})}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"碰撞检测"}),s.jsx("div",{children:s.jsx("div",{className:"button",onClick:()=>te(o()),children:"isPointInPath / isPointInStroke"})}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"像素操作"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>ie(o()),children:"getImageData / putImageData"}),s.jsx("div",{className:"button",onClick:()=>ee(o()),children:"ImageBitmap"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"文本工具"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>de(o()),children:"fillText / strokeText"}),s.jsx("div",{className:"button",onClick:()=>re(o()),children:"measureText"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"画布操作"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>ne(o()),children:"clear"}),s.jsx("div",{className:"button",onClick:()=>se(o()),children:"resize"}),s.jsx("div",{className:"button",onClick:()=>fe(o()),children:"translate"}),s.jsx("div",{className:"button",onClick:()=>ce(o()),children:"rotate"}),s.jsx("div",{className:"button",onClick:()=>he(o()),children:"scale"}),s.jsx("div",{className:"button",onClick:()=>ae(o()),children:"setTransform / transform"}),s.jsx("div",{className:"button",onClick:()=>xe(o()),children:"save / restore"})]}),s.jsx("h4",{style:{margin:"20px 0 10px 0",color:"#666"},children:"导出功能"}),s.jsxs("div",{children:[s.jsx("div",{className:"button",onClick:()=>ye(o()),children:"createBase64"}),s.jsx("div",{className:"button",onClick:()=>me(o()),children:"toBlob"}),s.jsx("div",{className:"button",onClick:()=>ge(o()),children:"download"})]})]})};S.__docgenInfo={description:"",methods:[],displayName:"CanvasDemo"};const Te={title:"element-utils/Canvas",component:S,parameters:{layout:"fullscreen"},argTypes:{}},p={};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:"{}",...p.parameters?.docs?.source}}};const Se=["Demo"];export{p as Demo,Se as __namedExportsOrder,Te as default};
