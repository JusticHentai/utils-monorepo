import{j as e}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{r as c}from"./iframe-BWchUvSv.js";import{c as b}from"./mutationObserver-wiXghfWe.js";import"./preload-helper-PPVm8Dsz.js";import"./index-DHiFYDE3.js";import"./index-DbXIB-0m.js";import"./interface-Xy6dxNqB.js";const v=(s,n,l=!1)=>{if(!s)return()=>{};const{stop:h}=b(s,o=>{const t=[],d=[];o.forEach(a=>{a.type==="childList"&&(t.push(...Array.from(a.addedNodes)),d.push(...Array.from(a.removedNodes)))}),!(!t.length&&!d.length)&&n(t,d)},{childList:!0,attributes:!1,subtree:l});return h},{action:i}=__STORYBOOK_MODULE_ACTIONS__,g=()=>{const s=c.useRef(null),[n,l]=c.useState(!1),[h,o]=c.useState([]),t=c.useRef(0);c.useEffect(()=>{if(!n||!s.current)return;const r=v(s.current,(p,f)=>{i("子节点变化")({添加的节点数:p.length,移除的节点数:f.length,添加的节点:p.map(m=>m.textContent),移除的节点:f.map(m=>m.textContent)})});return i("初始化成功")("点击按钮添加或移除子节点"),()=>{r()}},[n]);const d=()=>{l(!0),o([]),t.current=0},a=()=>{if(!n){i("请先初始化")();return}t.current++,o(r=>[...r,t.current])},C=()=>{if(!n){i("请先初始化")();return}if(h.length===0){i("没有可移除的子节点")();return}o(r=>r.slice(0,-1))},x=()=>{l(!1),o([]),t.current=0,i("清理完成")()};return e.jsxs("div",{children:[e.jsx("div",{className:"button",onClick:d,children:"初始化示例"}),e.jsx("div",{className:"button",onClick:a,children:"添加子节点"}),e.jsx("div",{className:"button",onClick:C,children:"移除子节点"}),e.jsx("div",{className:"button",onClick:x,children:"清理示例"}),n&&e.jsx("div",{style:{marginTop:40},children:e.jsxs("div",{ref:s,style:{width:300,minHeight:150,background:"#f5f5f5",borderRadius:8,padding:15},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:10,color:"#333"},children:"子节点容器"}),h.map(r=>e.jsxs("div",{className:"child-item",style:{padding:10,margin:"5px 0",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:4,color:"white"},children:["子节点 #",r]},r))]})})]})};g.__docgenInfo={description:"",methods:[],displayName:"OnChildListChangeDemo"};const E={title:"element-utils/onChildListChange",component:g,parameters:{layout:"centered"},argTypes:{}},u={};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:"{}",...u.parameters?.docs?.source}}};const D=["Demo"];export{u as Demo,D as __namedExportsOrder,E as default};
