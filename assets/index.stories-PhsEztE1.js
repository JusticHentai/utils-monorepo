import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as o}from"./iframe-BWchUvSv.js";import{o as h}from"./index-B_uU3mD0.js";/* empty css              */import"./preload-helper-PPVm8Dsz.js";import"./index-BtXwjIh0.js";import"./index-DbXIB-0m.js";const{action:n}=__STORYBOOK_MODULE_ACTIONS__,a=()=>{const[c,d]=o.useState(0),[t,l]=o.useState(null);o.useEffect(()=>{const r=h(i=>{d(p=>p+1),l(new Date().toLocaleTimeString()),n("BFCache 恢复")({persisted:i.persisted,timeStamp:i.timeStamp,message:"页面从 BFCache 恢复成功！"})});return n("监听已启动")("等待 BFCache 恢复事件..."),()=>{r()}},[]);const m=()=>{const r=window.top||window;r.location.href="https://www.baidu.com"};return e.jsxs("div",{children:[e.jsx("div",{className:"button",onClick:m,children:"离开页面（测试 BFCache）"}),e.jsxs("div",{style:{marginTop:20,padding:16,background:"#f5f5f5",borderRadius:8,maxWidth:400},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"监听状态:"})," ",e.jsx("span",{style:{color:"#52c41a"},children:"● 监听中"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"恢复次数:"})," ",c]}),t&&e.jsxs("p",{children:[e.jsx("strong",{children:"上次恢复:"})," ",t]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"#fff7e6",border:"1px solid #ffd591",borderRadius:4,fontSize:13},children:[e.jsx("p",{style:{margin:0,fontWeight:"bold",color:"#d46b08"},children:"⚠️ 测试说明"}),e.jsxs("ol",{style:{margin:"8px 0 0",paddingLeft:20,color:"#666"},children:[e.jsx("li",{children:'点击"离开页面"将跳转到外部网站'}),e.jsx("li",{children:"等待新页面加载完成"}),e.jsxs("li",{children:["点击浏览器的",e.jsx("strong",{children:"后退按钮"}),"返回"]}),e.jsx("li",{children:"如果 BFCache 生效，恢复次数会 +1"})]}),e.jsx("p",{style:{margin:"8px 0 0",fontSize:12,color:"#999"},children:"注：BFCache 是否生效取决于浏览器策略，Chrome/Safari 支持较好。"})]})]})]})};a.__docgenInfo={description:"",methods:[],displayName:"OnBFCacheRestoreDemo"};const R={title:"element-utils/onBFCacheRestore",component:a,parameters:{layout:"centered"},argTypes:{}},s={};s.parameters={...s.parameters,docs:{...s.parameters?.docs,source:{originalSource:"{}",...s.parameters?.docs?.source}}};const S=["Demo"];export{s as Demo,S as __namedExportsOrder,R as default};
