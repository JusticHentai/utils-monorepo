import{c as f}from"./index-BtXwjIh0.js";import{g as c,M as a}from"./index-B1yd03Fi.js";import{g}from"./index-BBae2uCj.js";import{E as p}from"./interface-l7xTqOLs.js";import{u as d}from"./index-CiAGgNxw.js";import{c as T}from"./performanceObserver-wogupI_g.js";const P=(m,u)=>{const o=u?.reportAllChanges??!1;let e={name:a.LCP,value:0,rating:c(a.LCP,0),delta:0,id:d(),navigationType:g(),entries:[]},s=!1;const l=()=>{e.value!==0&&(m(e),s=!0)},{stop:r}=T(p.LARGEST_CONTENTFUL_PAINT,i=>{const t=i[i.length-1];if(!t)return;const n=t.renderTime||t.loadTime;e={...e,value:n,delta:n-e.value,rating:c(a.LCP,n),entries:[...e.entries,t]},o&&l()});if(!o){const t=f(document,"visibilitychange",()=>{document.visibilityState==="hidden"&&(s||(l(),r()))},{once:!0});return()=>{t(),r()}}return r};export{P as o};
