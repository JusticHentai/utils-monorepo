import{j as n}from"./jsx-runtime-u17CrQMm.js";import{useMDXComponents as s}from"./index-Dgaj45eM.js";import{C as i}from"./blocks-Yd0TQZ2J.js";import"./iframe-BWchUvSv.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CRQ9sIcz.js";const t="import { action } from 'storybook/actions'\nimport getNavigationMetrics from '../../../packages/element-utils/src/getNavigationMetrics'\n\nconst basicDemo = () => {\n  const metrics = getNavigationMetrics()\n\n  if (!metrics) {\n    action('getNavigationMetrics')('Navigation Timing 数据不可用')\n    return\n  }\n\n  action('导航性能指标')({\n    '页面完全加载': `${Math.round(metrics.pageLoad)}ms`,\n    'DOM Ready': `${Math.round(metrics.domReady)}ms`,\n    'TTFB': `${Math.round(metrics.ttfb)}ms`,\n    'DNS 查询': `${Math.round(metrics.dns)}ms`,\n    'TCP 连接': `${Math.round(metrics.tcp)}ms`,\n    'TLS 握手': `${Math.round(metrics.tls)}ms`,\n    '内容传输': `${Math.round(metrics.trans)}ms`,\n    'DOM 解析': `${Math.round(metrics.domParse)}ms`,\n    '重定向': `${Math.round(metrics.redirect)}ms`,\n  })\n}\n\nexport default basicDemo\n";function r(d){const e={code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",...s(),...d.components};return n.jsxs(n.Fragment,{children:[n.jsx(e.h1,{id:"getnavigationmetrics",children:"getNavigationMetrics"}),`
`,n.jsx(e.p,{children:"获取导航基础性能信息。"}),`
`,n.jsx(e.h2,{id:"详细介绍",children:"详细介绍"}),`
`,n.jsxs(e.p,{children:[n.jsx(e.code,{children:"getNavigationMetrics"})," 基于 Navigation Timing API 计算页面导航各阶段耗时，返回包含 DNS、TCP、TLS、TTFB、DOM 解析等关键性能指标的对象。"]}),`
`,n.jsxs(e.p,{children:["适用于页面加载完成后采集一次性的导航性能数据，配合 ",n.jsx(e.code,{children:"onWindowLoaded"})," 使用效果最佳。"]}),`
`,n.jsx(e.h2,{id:"基础用法",children:"基础用法"}),`
`,n.jsx(i,{language:"typescript",children:t}),`
`,n.jsx(e.h2,{id:"参数介绍",children:"参数介绍"}),`
`,n.jsx(e.p,{children:"无参数。"}),`
`,n.jsx(e.h2,{id:"返回值",children:"返回值"}),`
`,n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"属性"}),n.jsx("th",{children:"类型"}),n.jsx("th",{children:"描述"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"unload"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"卸载耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"dnsCache"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"DNS 缓存耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"dns"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"DNS 查询耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"tcp"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"TCP 连接耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"tls"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"TLS 握手耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"ttfb"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"首字节时间"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"trans"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"内容传输耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"domParse"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"DOM 解析耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"domComplete"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"DOM 完成耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"loadEvent"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"Load 事件耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"redirect"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"重定向耗时"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"domReady"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"DOM Ready 时间"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"pageLoad"}),n.jsx("td",{children:n.jsx("code",{children:"number"})}),n.jsx("td",{children:"页面完全加载时间"})]})]})]}),`
`,n.jsxs(e.p,{children:["如果 Performance API 不可用则返回 ",n.jsx(e.code,{children:"undefined"}),"。"]}),`
`,n.jsx(e.h2,{id:"具体实现原理",children:"具体实现原理"}),`
`,n.jsxs(e.ol,{children:[`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"文件职责"}),"：",n.jsx(e.code,{children:"index.ts"})," 从 ",n.jsx(e.code,{children:"performance.getEntriesByType('navigation')"})," 获取 ",n.jsx(e.code,{children:"PerformanceNavigationTiming"})]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"核心流程"}),"：通过各时间戳之差计算各阶段耗时"]}),`
`,n.jsxs(e.li,{children:[n.jsx(e.strong,{children:"关键技术点"}),"：TLS 耗时仅在 ",n.jsx(e.code,{children:"secureConnectionStart > 0"})," 时计算（HTTPS 连接）"]}),`
`]})]})}function a(d={}){const{wrapper:e}={...s(),...d.components};return e?n.jsx(e,{...d,children:n.jsx(r,{...d})}):r(d)}export{a as default};
