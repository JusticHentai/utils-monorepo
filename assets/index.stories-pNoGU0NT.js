import{j as o}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{r as c}from"./iframe-BWchUvSv.js";import{c as y}from"./intersectionObserver-CsuZ92MF.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CcKdPq4Q.js";import"./index-DbXIB-0m.js";import"./interface-Xy6dxNqB.js";const b=(s,n,d)=>{const t=new WeakSet,{stop:a,observer:l}=y(s,({target:r,isIntersecting:i})=>{i&&(t.has(r)||(t.add(r),n(r),l?.unobserve(r)))},{...d,immediate:!0});return a},{action:u}=__STORYBOOK_MODULE_ACTIONS__,v=10,f=()=>{const s=c.useRef(null),[n,d]=c.useState(!1),[t,a]=c.useState(new Set);c.useEffect(()=>{if(!n||!s.current)return;const i=Array.from(s.current.querySelectorAll(".lazy-item")),e=b(i,h=>{const p=Number(h.dataset.index);a(x=>new Set([...x,p])),u(`元素 #${p} 进入视口`)("执行加载函数")},{rootMargin:"50px"});return u("初始化成功")("滚动容器查看懒加载效果，设置 rootMargin: 50px 提前加载"),()=>{e()}},[n]);const l=()=>{d(!0),a(new Set)},r=()=>{d(!1),a(new Set),u("清理完成")()};return o.jsxs("div",{children:[o.jsx("div",{className:"button",onClick:l,children:"初始化懒加载示例"}),o.jsx("div",{className:"button",onClick:r,children:"清理示例"}),n&&o.jsx("div",{style:{marginTop:40},children:o.jsx("div",{ref:s,style:{width:300,height:300,overflowY:"auto",background:"#f5f5f5",borderRadius:8,padding:10},children:Array.from({length:v}).map((i,e)=>o.jsx("div",{className:"lazy-item","data-index":e,style:{width:"100%",height:100,marginBottom:10,background:t.has(e)?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#ddd",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",color:t.has(e)?"white":"#666",fontSize:14},children:t.has(e)?`已加载 #${e}`:`未加载 #${e}`},e))})})]})};f.__docgenInfo={description:"",methods:[],displayName:"CreateLazyLoadObserverDemo"};const C={title:"element-utils/createLazyLoadObserver",component:f,parameters:{layout:"centered"},argTypes:{}},m={};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"{}",...m.parameters?.docs?.source}}};const z=["Demo"];export{m as Demo,z as __namedExportsOrder,C as default};
