import{j as n}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{J as p}from"./index-CozjGhNV.js";const{action:c}=__STORYBOOK_MODULE_ACTIONS__,g=(e,o)=>()=>{const s=e();s&&s();const t=document.getElementById("status"),u=p(i=>{c("检测到卡顿")({duration:`${i.duration.toFixed(2)}ms`,timestamp:new Date(i.timestamp).toISOString()}),t&&(t.textContent=`检测到卡顿: ${i.duration.toFixed(0)}ms`,t.style.background="linear-gradient(135deg, #ff4d4f 0%, #ff7875 100%)",setTimeout(()=>{t.textContent="监听中...",t.style.background="linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"},1e3))},{threshold:100});o(u),t&&(t.textContent="监听中...",t.style.background="linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"),c("开始监听")("阈值: 100ms")},{action:d}=__STORYBOOK_MODULE_ACTIONS__,f=(e,o)=>()=>{const s=e();if(s){s(),o();const t=document.getElementById("status");t&&(t.textContent="已停止监听",t.style.background="linear-gradient(135deg, #8c8c8c 0%, #bfbfbf 100%)"),d("停止监听")("已清理 requestAnimationFrame")}else d("停止监听")("当前未在监听状态")},{action:m}=__STORYBOOK_MODULE_ACTIONS__,_=()=>{const e=document.getElementById("status");e&&(e.textContent="正在模拟卡顿...",e.style.background="linear-gradient(135deg, #faad14 0%, #ffc53d 100%)"),m("模拟卡顿")("开始阻塞主线程 200ms"),setTimeout(()=>{const o=performance.now();for(;performance.now()-o<200;);m("模拟卡顿")("阻塞结束，如果正在监听会触发卡顿回调")},16)};let r=null;const O=g(()=>r,e=>{r=e}),x=f(()=>r,()=>{r=null}),l=()=>n.jsxs("div",{children:[n.jsx("div",{className:"button",onClick:O,children:"开始监听卡顿"}),n.jsx("div",{className:"button",onClick:x,children:"停止监听"}),n.jsx("div",{className:"button",onClick:_,children:"模拟卡顿（阻塞主线程 200ms）"}),n.jsx("div",{className:"area",children:n.jsx("div",{id:"status",className:"card",style:{width:280,transition:"all 0.3s"},children:'点击"开始监听"启动卡顿检测'})})]});l.__docgenInfo={description:"",methods:[],displayName:"OnJankDemo"};const b={title:"element-utils/onJank",component:l,parameters:{layout:"centered"},argTypes:{}},a={};a.parameters={...a.parameters,docs:{...a.parameters?.docs,source:{originalSource:"{}",...a.parameters?.docs?.source}}};const h=["Demo"];export{a as Demo,h as __namedExportsOrder,b as default};
