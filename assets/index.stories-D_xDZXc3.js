import{j as r}from"./jsx-runtime-u17CrQMm.js";import{r as a}from"./iframe-BWchUvSv.js";import{c as p}from"./intersectionObserver-CsuZ92MF.js";/* empty css              */import"./preload-helper-PPVm8Dsz.js";import"./index-CcKdPq4Q.js";import"./index-DbXIB-0m.js";import"./interface-Xy6dxNqB.js";const g=(e,t,o)=>{if(!e)return()=>{};let n=!1;const{stop:s}=p(e,({isIntersecting:i})=>{if(i){n=!0;return}n&&(t(),s())},{...o,immediate:!0});return s},{action:d}=__STORYBOOK_MODULE_ACTIONS__,l=()=>{const e=a.useRef(null),t=a.useRef(null),[o,n]=a.useState(!1),[s,i]=a.useState(!1);a.useEffect(()=>{if(!o||!e.current)return;const m=g(e.current,()=>{d("元素离开视口")("触发回调，观察器已自动停止"),i(!0)},{root:t.current});return d("初始化成功")("向下滚动容器使绿色元素离开视口"),()=>{m()}},[o]);const u=()=>{n(!0),i(!1),t.current&&(t.current.scrollTop=0)},f=()=>{n(!1),i(!1),d("清理完成")()};return r.jsxs("div",{children:[r.jsx("div",{className:"button",onClick:u,children:"初始化示例"}),r.jsx("div",{className:"button",onClick:f,children:"清理示例"}),o&&r.jsxs("div",{ref:t,style:{marginTop:40,width:300,height:200,overflowY:"auto",background:"#f5f5f5",borderRadius:8,padding:16},children:[r.jsx("div",{ref:e,style:{width:"100%",height:80,background:s?"#ff6b6b":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:s?"已离开视口!":"目标元素 - 向下滚动"}),r.jsx("div",{style:{marginTop:16,height:400,background:"#e0e0e0",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},children:"↑ 向上滚动使目标元素离开视口"})]})]})};l.__docgenInfo={description:"",methods:[],displayName:"OnLeaveViewportDemo"};const R={title:"element-utils/onLeaveViewport",component:l,parameters:{layout:"centered"},argTypes:{}},c={};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:"{}",...c.parameters?.docs?.source}}};const w=["Demo"];export{c as Demo,w as __namedExportsOrder,R as default};
