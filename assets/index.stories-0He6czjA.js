import{j as s}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{c as l}from"./index-Drfktd3g.js";const{action:i}=__STORYBOOK_MODULE_ACTIONS__,O=async()=>{i("创建 Promise 控制器")();const t=l();setTimeout(()=>{i("2 秒后解决 Promise")(),t.resolve("任务完成！")},2e3),i("开始等待 Promise...")();const e=await t.promise;i(`Promise 完成，结果: ${e}`)()},{action:a}=__STORYBOOK_MODULE_ACTIONS__,C=async()=>{a("创建按钮并等待点击事件")();const t=o=>{const d=l(),_=u=>{o.removeEventListener("click",_),d.resolve(u)};return o.addEventListener("click",_),d.promise},e=document.createElement("button");e.textContent="点击我完成 Promise",e.className="button";const r=document.getElementById("createPromiseControllerDemo");r?.appendChild(e),a("按钮已创建，等待点击...")();try{const o=await t(e);a(`按钮被点击！坐标: (${o.clientX}, ${o.clientY})`)()}finally{r?.removeChild(e),a("按钮已清理")()}},{action:n}=__STORYBOOK_MODULE_ACTIONS__,h=async()=>{n("开始加载图片")();const t=e=>{const r=l(),o=new Image;return o.onload=()=>{n("图片加载成功")(),r.resolve(o)},o.onerror=()=>{n("图片加载失败")(),r.reject(new Error("图片加载失败"))},o.src=e,r.promise};try{const e=await t("https://picsum.photos/200/300");n(`图片加载完成，尺寸: ${e.width}x${e.height}`)()}catch(e){n(`加载失败: ${e}`)()}},{action:c}=__STORYBOOK_MODULE_ACTIONS__,P=async()=>{c("创建会被拒绝的 Promise 控制器")();const t=l();setTimeout(()=>{c("1.5 秒后拒绝 Promise")(),t.reject(new Error("模拟的错误"))},1500),c("开始等待 Promise...")();try{await t.promise,c("这行不应该执行")()}catch(e){c(`Promise 被拒绝，错误: ${e.message}`)()}},p=()=>s.jsxs("div",{id:"createPromiseControllerDemo",children:[s.jsx("div",{className:"button",onClick:O,children:"基础用法演示"}),s.jsx("div",{className:"button",onClick:h,children:"图片加载演示"}),s.jsx("div",{className:"button",onClick:P,children:"Promise 拒绝演示"}),s.jsx("div",{className:"button",onClick:C,children:"事件等待演示"})]});p.__docgenInfo={description:"",methods:[],displayName:"createPromiseControllerDemo"};const y={title:"js-utils/createPromiseController",component:p,parameters:{layout:"centered"},argTypes:{}},m={};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"{}",...m.parameters?.docs?.source}}};const E=["Demo"];export{m as Demo,E as __namedExportsOrder,y as default};
