import{j as m}from"./jsx-runtime-u17CrQMm.js";/* empty css              */class c{status="pending";value;successQueue=[];failureQueue=[];constructor(r){r(n=>{setTimeout(()=>{if(this.status==="pending")for(this.status="success",this.value=n;this.successQueue.length;){const i=this.successQueue.shift();i&&i(this.value)}},0)},n=>{setTimeout(()=>{if(this.status==="pending")for(this.status="failure",this.value=n;this.failureQueue.length;){const i=this.failureQueue.shift();i&&i(this.value)}},0)})}then(r=s=>s,e=s=>s){return new c((s,n)=>{const a=h=>{try{const t=r(h);return t instanceof c?t.then(s,n):s(t)}catch(t){n(t)}},i=h=>{try{const t=e(h);return t instanceof c?t.then(s,n):s(t)}catch(t){n(t)}};this.status==="pending"?(this.successQueue.push(a),this.failureQueue.push(i)):this.status==="success"?r(this.value):e(this.value)})}catch(r=e=>e){return this.then(()=>null,r)}}const p=()=>new Promise(o=>{new c((e,s)=>{setTimeout(()=>{e("MyPromise resolved!")},100)}).then(e=>e+" -> then1").then(e=>{o({message:"MyPromise 链式调用成功",result:e+" -> then2"})})}),f=()=>new Promise(o=>{new c((e,s)=>{setTimeout(()=>{s("MyPromise rejected!")},100)}).then(e=>e,e=>"Error caught: "+e).then(e=>{o({message:"MyPromise reject 处理成功",result:e})})}),{action:l}=__STORYBOOK_MODULE_ACTIONS__,d=()=>m.jsxs("div",{children:[m.jsx("div",{className:"button",onClick:()=>{const o=p();l("normal")(o)},children:"normal"}),m.jsx("div",{className:"button",onClick:()=>{const o=f();l("reject")(o)},children:"reject"})]});d.__docgenInfo={description:"",methods:[],displayName:"MyPromiseDemo"};const j={title:"learn-utils/handwritten/MyPromise",component:d,parameters:{layout:"centered"},argTypes:{}},u={};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:"{}",...u.parameters?.docs?.source}}};const v=["Demo"];export{u as Demo,v as __namedExportsOrder,j as default};
