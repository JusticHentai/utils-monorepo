import{j as r}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{r as g}from"./iframe-BWchUvSv.js";import{g as S}from"./index-B0IsmQno.js";import{u as h}from"./index-CBBZs1mf.js";import{i as B}from"./index-DosksGiu.js";import{i as D}from"./index-DL3VI9dp.js";import{i as C}from"./index-DoeT91Fo.js";import{i as L}from"./index-Cx9uKrrm.js";import"./preload-helper-PPVm8Dsz.js";import"./index-GMzEpHqB.js";const k={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,meta:L()?[91,93]:[91,92],selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,comma:188,dash:189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},x={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.type==="keyup"?k.meta.includes(e.keyCode):e.metaKey},E=e=>D(e)||C(e),O=e=>{const t=Object.keys(x).reduce((o,s)=>x[s](e)?o+1:o,0);return[16,17,18,91,92].includes(e.keyCode)?t:t+1},v=(e,t,o)=>{if(!e.key)return!1;if(C(t))return e.keyCode===t?t:!1;const s=t.split(".");let n=0;for(const a of s){const c=x[a],d=k[a.toLowerCase()];(c&&c(e)||d&&d===e.keyCode)&&n++}return o?n===s.length&&O(e)===s.length?t:!1:n===s.length?t:!1},N=(e,t)=>B(e)?e:E(e)?o=>v(o,e,t):Array.isArray(e)?o=>e.find(s=>v(o,s,t)):()=>!!e,R=["keydown"],m=(e,t,o)=>{const{events:s=R,target:n,exactMatch:a=!1,useCapture:c=!1}=o||{},d=h(t),j=h(e),w=h(s);g.useEffect(()=>{const f=S(n,window);if(!f)return;const K=w.current,b=l=>{const p=l,y=N(j.current,a)(p),A=E(y)?y:p.key;if(y)return d.current?.(p,A)};for(const l of K)f?.addEventListener?.(l,b,c);return()=>{for(const l of K)f?.removeEventListener?.(l,b,c)}},[n,a,c,j,d,w])},{action:i}=__STORYBOOK_MODULE_ACTIONS__,_=()=>{const[e,t]=g.useState(0),[o,s]=g.useState("");return m("uparrow",()=>{t(n=>n+1),s("↑ ArrowUp"),i("ArrowUp")("计数 +1")}),m("downarrow",()=>{t(n=>n-1),s("↓ ArrowDown"),i("ArrowDown")("计数 -1")}),m("enter",()=>{s("↵ Enter"),i("Enter")("Enter 键被按下")}),m("ctrl.s",n=>{n.preventDefault(),s("Ctrl + S"),i("Ctrl+S")("组合键被按下")},{exactMatch:!0}),m(["a","b","c"],(n,a)=>{s(String(a).toUpperCase()),i("A/B/C")(a)}),r.jsxs("div",{children:[r.jsx("div",{style:{marginBottom:16,fontWeight:"bold"},children:"键盘按键监听"}),r.jsxs("div",{style:{marginBottom:16,padding:16,background:"#f5f5f5",borderRadius:8},children:[r.jsxs("div",{style:{marginBottom:8},children:["计数器：",r.jsx("span",{style:{color:"#1890ff",fontSize:24},children:e})]}),r.jsxs("div",{children:["最后按下的键：",r.jsx("span",{style:{color:"#52c41a",fontWeight:"bold"},children:o||"无"})]})]}),r.jsxs("div",{style:{marginBottom:16,color:"#666"},children:[r.jsx("div",{style:{marginBottom:8,fontWeight:"bold"},children:"尝试以下操作："}),r.jsxs("ul",{style:{margin:0,paddingLeft:20},children:[r.jsxs("li",{children:["按 ",r.jsx("code",{children:"↑"})," 方向键：计数 +1"]}),r.jsxs("li",{children:["按 ",r.jsx("code",{children:"↓"})," 方向键：计数 -1"]}),r.jsxs("li",{children:["按 ",r.jsx("code",{children:"Enter"})," 键"]}),r.jsxs("li",{children:["按 ",r.jsx("code",{children:"Ctrl + S"})," 组合键"]}),r.jsxs("li",{children:["按 ",r.jsx("code",{children:"A"}),"、",r.jsx("code",{children:"B"}),"、",r.jsx("code",{children:"C"})," 键"]})]})]}),r.jsx("div",{className:"button",onClick:()=>{t(0),s(""),i("重置")("计数器已重置")},children:"重置计数器"})]})};_.__docgenInfo={description:"",methods:[],displayName:"UseKeyPressDemo"};const J={title:"element-utils/useKeyPress",component:_,parameters:{layout:"centered"},argTypes:{}},u={};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:"{}",...u.parameters?.docs?.source}}};const Q=["Demo"];export{u as Demo,Q as __namedExportsOrder,J as default};
