import{j as d}from"./jsx-runtime-u17CrQMm.js";/* empty css              */const a=(r,s)=>{const c=((...n)=>{const o=s?s(...n):n[0],{cache:e}=c;if(e.has(o))return e.get(o);const t=r(...n);return e.set(o,t),t});return c.cache=new Map,c},{action:l}=__STORYBOOK_MODULE_ACTIONS__,O=()=>{let r=0;const s=a((i,_,z)=>(r++,i+_+z)),c=s(1,2,3),n=s(1,3,5);l("memoize - 基于首参缓存")({"add(1,2,3)":c,"add(1,3,5)":n,调用次数:r,说明:"第一个参数都是1，第二次返回缓存值6而非9"});const o=a(i=>i),e=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],t=e.map(i=>o(i));l("memoize - prototype 属性名作为缓存键")({输入:e,结果:t,正确:JSON.stringify(t)===JSON.stringify(e),说明:"使用 Map 存储缓存，不受原型链影响"}),l("memoize - cache 属性")({缓存大小:o.cache.size,缓存类型:o.cache instanceof Map})},{action:p}=__STORYBOOK_MODULE_ACTIONS__,h=()=>{const r=(e,t,i)=>e+t+i,s=a(r,r);p("memoize + resolver")({"memoized(1,2,3)":s(1,2,3),"memoized(1,3,5)":s(1,3,5),说明:"resolver 也是 add 函数，所以缓存键分别是6和9，不会冲突"});const c=a((e,t)=>({id:e,name:t,time:Date.now()}),e=>e),n=c(1,"Alice"),o=c(1,"Bob");p("memoize - 按 id 缓存")({第一次:n,第二次缓存:o,相同引用:n===o,说明:"resolver 返回 id，相同 id 返回缓存结果"})},u=()=>d.jsxs("div",{children:[d.jsx("div",{className:"button",onClick:O,children:"基础记忆化"}),d.jsx("div",{className:"button",onClick:h,children:"自定义解析器"})]});u.__docgenInfo={description:"",methods:[],displayName:"MemoizeDemo"};const D={title:"js-utils/memoize",component:u,parameters:{layout:"centered"},argTypes:{}},m={};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"{}",...m.parameters?.docs?.source}}};const S=["Demo"];export{m as Demo,S as __namedExportsOrder,D as default};
