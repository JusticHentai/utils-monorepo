import{j as c}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{d as z}from"./index-DlFSBFMu.js";var a=(e=>(e[e.WIDTH=0]="WIDTH",e[e.HEIGHT=1]="HEIGHT",e[e.BOTH=2]="BOTH",e))(a||{});const _={preset:{width:1920,height:1080},type:2,maxRatio:1},D=()=>{const e=document.querySelector("html"),n=e.clientWidth,t=e.clientHeight;return{width:n,height:t}},H=e=>{const{type:n,preset:t,maxRatio:i=1}=e,{width:s,height:o}=D();let d=1;if(n===a.WIDTH&&t?.width&&(d=Math.min(s/t.width,i)),n===a.HEIGHT&&t?.height&&(d=Math.min(o/t.height,i)),n===a.BOTH&&t?.width&&t?.height){const y=s/t.width,g=o/t.height;d=Math.min(g,y,i)}return d},w=()=>{const e=document.body;e.style.height=`${window.innerHeight}px`},T=e=>{const n=document.querySelector("html"),t=100*e;n.style.fontSize=`${t}px`},m=e=>{const{preset:n,type:t,fullScreen:i,cb:s}=e,o=H({preset:n,type:t});T(o),s?.({...e,ratio:o}),i&&w()},v=e=>{const{debounce:n}=e,t=n?z({cb:m,duration:n,immediate:!1}):()=>m(e),i=()=>t(e);return window.addEventListener("resize",i),window.addEventListener("orientationchange",i),()=>{window.removeEventListener("resize",i),window.removeEventListener("orientationchange",i)}},h=e=>{const n={..._,...e};return m(n),v(n)},{action:u}=__STORYBOOK_MODULE_ACTIONS__,B=(e,n)=>()=>{const t=e();t&&t();const i=h({preset:{width:1920,height:1080},type:a.BOTH,cb:s=>{const o=document.getElementById("resize-info");o&&(o.textContent=`当前 ratio: ${s.ratio.toFixed(4)}`),u("resize 回调")({ratio:s.ratio})}});n(i),u("默认适配 (BOTH)")("已初始化, 预设 1920x1080, 取宽高最小比例")},{action:p}=__STORYBOOK_MODULE_ACTIONS__,I=(e,n)=>()=>{const t=e();if(t){t(),n();const i=document.getElementById("resize-info");i&&(i.textContent="已销毁 resize 监听"),p("销毁成功")("已移除 resize 和 orientationchange 事件监听")}else p("销毁失败")("当前没有活跃的 resize 监听")},{action:f}=__STORYBOOK_MODULE_ACTIONS__,b=(e,n)=>()=>{const t=e();t&&t();const i=h({preset:{width:1920,height:1080},type:a.BOTH,maxRatio:1/0,cb:s=>{const o=document.getElementById("resize-info");o&&(o.textContent=`当前 ratio: ${s.ratio.toFixed(4)} (无上限)`),f("resize 回调")({ratio:s.ratio})}});n(i),f("允许放大 (maxRatio: Infinity)")("已初始化, 大屏时 ratio 可超过 1")},{action:O}=__STORYBOOK_MODULE_ACTIONS__,C=(e,n)=>()=>{const t=e();t&&t();const i=h({preset:{width:1920},type:a.WIDTH,debounce:200,cb:s=>{const o=document.getElementById("resize-info");o&&(o.textContent=`当前 ratio: ${s.ratio.toFixed(4)} (仅宽度)`),O("resize 回调")({ratio:s.ratio})}});n(i),O("仅宽度适配 (WIDTH)")("已初始化, 仅按宽度比例适配, 防抖 200ms")};let r=null;const R=B(()=>r,e=>{r=e}),S=I(()=>r,()=>{r=null}),N=b(()=>r,e=>{r=e}),j=C(()=>r,e=>{r=e}),x=()=>c.jsxs("div",{children:[c.jsx("div",{className:"button",onClick:R,children:"默认适配 (BOTH 模式)"}),c.jsx("div",{className:"button",onClick:j,children:"仅宽度适配 (WIDTH 模式)"}),c.jsx("div",{className:"button",onClick:N,children:"允许放大 (maxRatio: Infinity)"}),c.jsx("div",{className:"button",onClick:S,children:"销毁监听"}),c.jsx("div",{className:"area",children:c.jsx("div",{id:"resize-info",className:"card",children:"点击按钮初始化 resize 适配"})})]});x.__docgenInfo={description:"",methods:[],displayName:"ResizeDemo"};const $={title:"element-utils/resize",component:x,parameters:{layout:"centered"},argTypes:{}},l={};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:"{}",...l.parameters?.docs?.source}}};const k=["Demo"];export{l as Demo,k as __namedExportsOrder,$ as default};
