import{g as m,M as u}from"./index-B1yd03Fi.js";import{g as p}from"./index-BBae2uCj.js";import{E as g}from"./interface-l7xTqOLs.js";import{u as v}from"./index-CiAGgNxw.js";import{v as T}from"./index-BecUxZRD.js";import{c as S}from"./performanceObserver-wogupI_g.js";const d=(t,i,e)=>{if(t.hadRecentInput)return{sessionValue:i,sessionEntries:e};const r=e[0],s=e[e.length-1];return i&&t.startTime-(s?.startTime||0)<1e3&&t.startTime-(r?.startTime||0)<5e3?{sessionValue:i+t.value,sessionEntries:[...e,t]}:{sessionValue:t.value,sessionEntries:[t]}},M=(t,i)=>{const e=i?.reportAllChanges??!1;let r={name:u.CLS,value:0,rating:m(u.CLS,0),delta:0,id:v(),navigationType:p(),entries:[]},s=0,o=[];const l=()=>{t(r)},{stop:n}=S(g.LAYOUT_SHIFT,a=>{a.forEach(f=>{const c=d(f,s,o);s=c.sessionValue,o=c.sessionEntries,!(s<=r.value)&&(r={...r,value:s,delta:s-r.value,rating:m(u.CLS,s),entries:o},e&&l())})});if(!e){const a=T({hidden:()=>{l(),n()},once:!0});return()=>{a(),n()}}return n};export{M as o};
