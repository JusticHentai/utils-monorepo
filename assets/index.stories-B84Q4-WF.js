import{j as o}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{r as t}from"./iframe-BWchUvSv.js";import"./preload-helper-PPVm8Dsz.js";var e=(r=>(r[r.IDLE=0]="IDLE",r[r.RUNNING=1]="RUNNING",r[r.PAUSED=2]="PAUSED",r))(e||{});const k=r=>{const{initialSeconds:c}=r,[N,d]=t.useState(c),[R,a]=t.useState(e.IDLE),s=t.useRef(e.IDLE),l=t.useRef(null),m=t.useRef(0),u=t.useRef(c*1e3),n=t.useCallback(()=>{l.current&&(clearInterval(l.current),l.current=null)},[]),i=t.useCallback(()=>{n(),m.current=Date.now(),l.current=setInterval(()=>{const C=Date.now(),E=C-m.current;m.current=C,u.current=Math.max(0,u.current-E);const b=Math.ceil(u.current/1e3);d(b),!(u.current>0)&&(n(),s.current=e.IDLE,a(e.IDLE))},1e3)},[n]),h=t.useCallback(()=>{s.current!==e.RUNNING&&(s.current===e.IDLE&&(u.current=c*1e3,d(c)),s.current=e.RUNNING,a(e.RUNNING),i())},[c,i]),x=t.useCallback(()=>{s.current===e.RUNNING&&(s.current=e.PAUSED,a(e.PAUSED),n())},[n]),I=t.useCallback(()=>{n(),s.current=e.IDLE,a(e.IDLE)},[n]),w=t.useCallback(()=>{s.current===e.PAUSED&&(s.current=e.RUNNING,a(e.RUNNING),i())},[i]),g=t.useCallback(()=>{n(),u.current=c*1e3,d(c),s.current=e.RUNNING,a(e.RUNNING),i()},[n,c,i]);return t.useEffect(()=>()=>{n()},[n]),{remainingSeconds:N,countDownStatus:R,startCountdown:h,pauseCountdown:x,resumeCountdown:w,restartCountdown:g,endCountdown:I}},{action:f}=__STORYBOOK_MODULE_ACTIONS__,D=()=>{const[r]=t.useState(10),{remainingSeconds:c,countDownStatus:N,startCountdown:d,pauseCountdown:R,resumeCountdown:a,restartCountdown:s,endCountdown:l}=k({initialSeconds:r}),m=["空闲","运行中","已暂停"][N],u=()=>{d(),f("开始倒计时")("状态: 运行中")},n=()=>{R(),f("暂停倒计时")("状态: 已暂停")},i=()=>{a(),f("恢复倒计时")("状态: 运行中")},h=()=>{s(),f("重新开始")(`重置为 ${r} 秒`)},x=()=>{l(),f("结束倒计时")("状态: 空闲")};return o.jsxs("div",{children:[o.jsx("div",{className:"button",onClick:u,children:"开始倒计时"}),o.jsx("div",{className:"button",onClick:n,children:"暂停"}),o.jsx("div",{className:"button",onClick:i,children:"恢复"}),o.jsx("div",{className:"button",onClick:h,children:"重新开始"}),o.jsx("div",{className:"button",onClick:x,children:"结束"}),o.jsx("div",{style:{marginTop:40,textAlign:"center"},children:o.jsxs("div",{style:{width:200,height:120,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:8,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white"},children:[o.jsx("div",{style:{fontSize:36,fontWeight:"bold"},children:c}),o.jsx("div",{style:{fontSize:14,marginTop:8},children:"秒"}),o.jsx("div",{style:{fontSize:12,marginTop:8,padding:"2px 8px",background:"rgba(255,255,255,0.2)",borderRadius:4},children:m})]})})]})};D.__docgenInfo={description:"",methods:[],displayName:"UseCountDownDemo"};const G={title:"element-utils/useCountDown",component:D,parameters:{layout:"centered"},argTypes:{}},p={};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:"{}",...p.parameters?.docs?.source}}};const L=["Demo"];export{p as Demo,L as __namedExportsOrder,G as default};
