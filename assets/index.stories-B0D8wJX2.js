import{j as n}from"./jsx-runtime-u17CrQMm.js";/* empty css              */import{R as O,a as l,b as o}from"./index-BhBzrgsn.js";import"./index-BINnBmJz.js";import"./index-nL6JsiBQ.js";import"./index-DbXIB-0m.js";import"./index-B_-fQMag.js";import"./index-BtXwjIh0.js";import"./index-D2Y4DYgy.js";import"./index-CiAGgNxw.js";import"./index-BecUxZRD.js";const{action:a}=__STORYBOOK_MODULE_ACTIONS__;let p=null;const _=(r,e)=>()=>{if(r()){a("已初始化")("Reporter 实例已存在，请先销毁");return}p=new O({reportUrl:"/api/report",appId:"storybook-demo",reportMethod:l.BEACON,batchSize:3,reportInterval:3e3,beforeReport:t=>(a("beforeReport 钩子触发")(t),t),afterReport:(t,m)=>{a("afterReport 钩子触发")({data:t,success:m})}}),e(p),a("初始化成功")({sessionId:p.sessionId,pageId:p.pageId,reportUrl:"/api/report",reportMethod:l.BEACON,batchSize:3,reportInterval:3e3})},{action:c}=__STORYBOOK_MODULE_ACTIONS__,I=r=>()=>{const e=r();if(!e){c("未初始化")("请先点击「初始化 Reporter」");return}e.report(o.PERFORMANCE,{metricType:"webVitals",name:"LCP",value:1234.5}),c("上报性能数据")(o.PERFORMANCE),e.report(o.ERROR,{message:"TypeError: xxx is not a function",stack:"at demo.ts:1:1"},!0),c("上报错误数据（立即上报）")(o.ERROR),e.report(o.CUSTOM,{event:"button_click",label:"demo"}),c("上报自定义数据")(o.CUSTOM)},{action:d}=__STORYBOOK_MODULE_ACTIONS__,f=r=>()=>{const e=r();if(!e){d("未初始化")("请先点击「初始化 Reporter」");return}e.flush(),d("flush 完成")("已将缓存中的数据立即上报")},{action:u}=__STORYBOOK_MODULE_ACTIONS__,E=r=>()=>{const e=r();if(!e){u("未初始化")("请先点击「初始化 Reporter」");return}const t=e.pageId;e.updatePageInfo();const m=e.pageId;u("更新页面信息")({oldPageId:t,newPageId:m})};let s=null;const D=_(()=>s,r=>{s=r}),T=I(()=>s),h=f(()=>s),C=E(()=>s),R=()=>n.jsxs("div",{children:[n.jsx("div",{className:"button",onClick:D,children:"初始化 Reporter"}),n.jsx("div",{className:"button",onClick:T,children:"上报数据"}),n.jsx("div",{className:"button",onClick:h,children:"手动 Flush"}),n.jsx("div",{className:"button",onClick:C,children:"更新页面信息"})]});R.__docgenInfo={description:"",methods:[],displayName:"ReporterDemo"};const k={title:"element-utils/reporter",component:R,parameters:{layout:"centered"},argTypes:{}},i={};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:"{}",...i.parameters?.docs?.source}}};const y=["Demo"];export{i as Demo,y as __namedExportsOrder,k as default};
