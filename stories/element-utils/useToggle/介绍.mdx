import { CodeOrSourceMdx } from '@storybook/addon-docs/blocks'
import indexTsx from './index.tsx?raw'

# useToggle

用于在两个状态值间切换的 Hook。

## 详细介绍

useToggle 是一个用于管理切换状态的 React Hook，它可以在两个值之间切换。默认情况下，它在 `true` 和 `false` 之间切换，但也支持在任意两个自定义值之间切换。

### 使用场景

- 控制模态框/抽屉的显示隐藏
- 切换主题（明/暗）
- 切换语言
- 控制折叠/展开状态
- 任何需要在两个状态之间切换的场景

## 演示代码

<CodeOrSourceMdx language="tsx">
  {indexTsx}
</CodeOrSourceMdx>

## 参数介绍

<table>
  <thead>
    <tr>
      <th>参数名</th>
      <th>类型</th>
      <th>默认值</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>defaultValue</td>
      <td><code>D</code></td>
      <td><code>false</code></td>
      <td>默认值（左值）</td>
    </tr>
    <tr>
      <td>reverseValue</td>
      <td><code>R</code></td>
      <td><code>!defaultValue</code></td>
      <td>反转值（右值）</td>
    </tr>
  </tbody>
</table>

## 返回值

<table>
  <thead>
    <tr>
      <th>属性名</th>
      <th>类型</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>state</td>
      <td><code>D | R</code></td>
      <td>当前状态值</td>
    </tr>
    <tr>
      <td>actions.toggle</td>
      <td><code>() =&gt; void</code></td>
      <td>切换状态</td>
    </tr>
    <tr>
      <td>actions.set</td>
      <td><code>(value: D | R) =&gt; void</code></td>
      <td>设置指定值</td>
    </tr>
    <tr>
      <td>actions.setLeft</td>
      <td><code>() =&gt; void</code></td>
      <td>设置为左值（defaultValue）</td>
    </tr>
    <tr>
      <td>actions.setRight</td>
      <td><code>() =&gt; void</code></td>
      <td>设置为右值（reverseValue）</td>
    </tr>
  </tbody>
</table>

## 具体实现原理

### 核心流程

1. **状态初始化**: 使用 `useState` 初始化状态为 `defaultValue`
2. **计算反转值**: 如果未提供 `reverseValue`，则默认使用 `!defaultValue`
3. **创建操作方法**: 使用 `useMemo` 缓存各个操作函数，避免不必要的重渲染

### 关键技术点

- **泛型支持**: 支持任意类型的值切换，不仅限于布尔值
- **函数重载**: 提供多种调用方式的类型提示
- **Memoization**: 使用 `useMemo` 优化性能，确保 actions 引用稳定
