import indexTsx from './index.tsx?raw'
import basicDemo from './basicDemo.tsx?raw'
import multiDemo from './multiDemo.tsx?raw'
import { CodeOrSourceMdx } from '@storybook/addon-docs/blocks'

# useMergeProps

React Hook，用于合并多个属性对象。

## 详细介绍

`useMergeProps` 将多个属性对象按顺序合并，后面的属性会覆盖前面的同名属性。内部使用 `useMemo` 缓存合并结果，避免每次渲染都创建新对象。

**使用场景**：
- 组件默认属性与用户传入属性合并
- 多层配置覆盖（默认配置 → 用户配置 → 运行时覆盖）
- 主题/样式对象的层级合并

## 基础用法

两个对象合并，传入属性覆盖默认属性：

<CodeOrSourceMdx language="tsx">
  {basicDemo}
</CodeOrSourceMdx>

## 多对象合并

支持传入任意数量的属性对象，按顺序依次覆盖：

<CodeOrSourceMdx language="tsx">
  {multiDemo}
</CodeOrSourceMdx>

## 演示代码

<CodeOrSourceMdx language="tsx">
  {indexTsx}
</CodeOrSourceMdx>

## 参数介绍

<table>
  <thead>
    <tr>
      <th>参数名</th>
      <th>类型</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>...propsList</td>
      <td><code>T[]</code></td>
      <td>多个属性对象，按顺序合并，后面的覆盖前面的</td>
    </tr>
  </tbody>
</table>

## 返回值

<table>
  <thead>
    <tr>
      <th>类型</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>T</code></td>
      <td>合并后的属性对象</td>
    </tr>
  </tbody>
</table>

## 具体实现原理

**文件职责**：
- `index.ts`：实现 `useMergeProps` Hook

**核心流程**：
1. 接收 rest 参数 `...propsList`，支持传入任意数量的属性对象
2. 使用 `useMemo` 包裹 `Object.assign({}, ...propsList)` 进行合并，以空对象为目标避免修改源对象
3. 依赖项直接使用 `propsList` 数组，任意一个属性对象变化时重新计算

**关键技术点**：
- **`Object.assign`**：按顺序将所有属性对象合并到空对象上，后面的同名属性自然覆盖前面的
- **`useMemo`**：缓存合并结果，属性对象引用未变化时直接复用上次结果，避免不必要的对象创建
- **rest 参数**：使用 `...propsList` 接收任意数量的参数，相比固定两个参数更灵活
