import normalDemo from './normalDemo?raw'
import sourceCode from '../../../../packages/learn-utils/src/handwritten/reduce?raw'
import { CodeOrSourceMdx } from '@storybook/addon-docs/blocks'

# reduce 数组归约

手写实现 `Array.prototype.reduce()` 方法，将数组归约为单个值。

## 核心原理

1. **初始值处理**：如果提供初始值，从索引 0 开始；否则用第一个元素作为初始值，从索引 1 开始
2. **累积计算**：每次迭代将上一次的结果和当前元素传入回调函数
3. **返回最终值**：遍历完成后返回累积的结果

## 源码实现

<CodeOrSourceMdx language="typescript">
  {sourceCode}
</CodeOrSourceMdx>

## 使用示例

<CodeOrSourceMdx language="typescript">
  {normalDemo}
</CodeOrSourceMdx>

## 参数介绍

### arr

- 类型：`any[]`
- 描述：需要归约的数组

### cb

- 类型：`(accumulator: any, currentValue: any, index: number, arr: any[]) => any`
- 描述：归约回调函数

### initValue

- 类型：`any`（可选）
- 描述：初始值，如果不提供则使用数组第一个元素

## 返回值

- 类型：`any`
- 描述：归约后的单个值

## 常见应用场景

1. **数组求和**：`reduce((a, b) => a + b, 0)`
2. **数组去重**：结合 `includes` 使用
3. **数组转对象**：将数组转换为键值对对象
4. **扁平化数组**：结合 `concat` 使用
