import normalDemo from './normalDemo?raw'
import sourceCode from '../../../../packages/learn-utils/src/handwritten/map?raw'
import { CodeOrSourceMdx } from '@storybook/addon-docs/blocks'

# map 数组映射

手写实现 `Array.prototype.map()` 方法，返回对每个元素执行回调后的新数组。

## 核心原理

1. **遍历数组**：使用 `for...of` 配合 `entries()` 获取索引和元素
2. **执行回调**：对每个元素执行回调函数
3. **收集结果**：将回调返回值收集到新数组中

## 源码实现

<CodeOrSourceMdx language="typescript">
  {sourceCode}
</CodeOrSourceMdx>

## 使用示例

<CodeOrSourceMdx language="typescript">
  {normalDemo}
</CodeOrSourceMdx>

## 参数介绍

### arr

- 类型：`any[]`
- 描述：需要映射的数组

### cb

- 类型：`(item: any, index: number, arr: any[]) => any`
- 描述：映射回调函数，返回值作为新数组的元素

## 返回值

- 类型：`any[]`
- 描述：映射后的新数组

## 与 forEach 的区别

- `map` 返回新数组，`forEach` 返回 `undefined`
- `map` 用于数据转换，`forEach` 用于遍历执行副作用
