import { CodeOrSourceMdx } from '@storybook/addon-docs/blocks'
import sourceCode from '../../../../packages/learn-utils/src/leetcode/longestValidParentheses?raw'
import demoCode from './normalDemo?raw'

# 最长有效括号 (LeetCode 32)

## 题目描述

给你一个只包含 `(` 和 `)` 的字符串，找出最长有效（格式正确且连续）括号子串的长度。

## 核心原理

**动态规划**：
- `dp[i]` 表示以 `s[i]` 结尾的最长有效括号长度
- 只有当 `s[i] = ')'` 时才可能有有效括号

## 解题思路

1. 如果 `s[i] = ')'` 且 `s[i-1] = '('`，则 `dp[i] = dp[i-2] + 2`
2. 如果 `s[i] = ')'` 且 `s[i-1] = ')'`，检查 `s[i - dp[i-1] - 1]` 是否为 `(`
3. 如果是，则 `dp[i] = dp[i-1] + 2 + dp[i - dp[i-1] - 2]`

## 复杂度分析

- **时间复杂度**：O(n)
- **空间复杂度**：O(n)

## 源码实现

<CodeOrSourceMdx language="typescript">
  {sourceCode}
</CodeOrSourceMdx>

## 示例代码

<CodeOrSourceMdx language="typescript">
  {demoCode}
</CodeOrSourceMdx>
