import { CodeOrSourceMdx } from '@storybook/addon-docs/blocks'
import sourceCode from '../../../../packages/learn-utils/src/leetcode/countBits?raw'
import demoCode from './normalDemo?raw'

# 比特位计数 (LeetCode 338)

## 题目描述

给你一个整数 `n`，对于 `0 <= i <= n` 中的每个 `i`，计算其二进制表示中 `1` 的个数，返回一个长度为 `n + 1` 的数组 `ans` 作为答案。

## 核心原理

**动态规划 + 位运算**：
- 偶数的二进制 1 的个数等于其一半的 1 的个数（右移一位）
- 奇数的二进制 1 的个数等于前一个偶数的 1 的个数加 1

## 解题思路

1. `dp[0] = 0`
2. 如果 `i` 是偶数：`dp[i] = dp[i / 2]`
3. 如果 `i` 是奇数：`dp[i] = dp[i - 1] + 1`

## 复杂度分析

- **时间复杂度**：O(n)
- **空间复杂度**：O(n)

## 源码实现

<CodeOrSourceMdx language="typescript">
  {sourceCode}
</CodeOrSourceMdx>

## 示例代码

<CodeOrSourceMdx language="typescript">
  {demoCode}
</CodeOrSourceMdx>
