import SettingsJson from '../../.vscode/settings.json?raw'
import { CodeOrSourceMdx } from '@storybook/addon-docs/blocks'

# settings.json

- VS Code 编辑器配置文件

## 配置

<CodeOrSourceMdx language="json">
  {SettingsJson}
</CodeOrSourceMdx>

## 配置详解

### Prettier 配置

#### `"prettier.configPath": "packages/config-utils/.prettierrc"`
- **作用**：指定 Prettier 配置文件路径
- **说明**：
  - 告诉 VS Code 的 Prettier 扩展使用指定的配置文件
  - 路径相对于工作区根目录
  - vscode 的 prettier 插件不支持 prettier.config.js 文件，所以需要使用 .prettierrc 文件
- **好处**：
  - **统一格式**：整个工作区使用相同的 Prettier 配置
  - **复用配置**：避免在每个项目中重复配置
  - **易于维护**：修改配置工具包的配置即可影响整个工作区

### 编辑器标签自定义

#### `"workbench.editor.customLabels.enabled": true`
- **作用**：启用自定义编辑器标签功能
- **说明**：
  - 允许自定义文件标签的显示格式
  - 在 VS Code 的标签栏中显示自定义的文件名格式
- **好处**：在 monorepo 项目中更容易识别文件所属的包

#### `"workbench.editor.customLabels.patterns"`
- **作用**：定义自定义标签的匹配模式和格式
- **说明**：使用对象定义不同文件路径的标签格式

##### `"**/packages/**/*": "[${dirname(-3)}] ${filename}"`
- **作用**：为 `packages` 目录下的文件自定义标签格式
- **说明**：
  - `"**/packages/**/*"`：匹配所有 `packages` 目录下的文件
  - `[${dirname(-3)}]`：显示从文件路径向上三级目录的名称（即包名）
  - `${filename}`：显示文件名
- **示例**：
  - 文件路径：`packages/components/src/button/index.tsx`
  - 标签显示：`[components] index.tsx`
  - 文件路径：`packages/config-utils/eslint.config.js`
  - 标签显示：`[config-utils] eslint.config.js`
- **好处**：
  - **快速识别**：在标签栏中直接看到文件所属的包
  - **减少混淆**：在 monorepo 中打开多个同名文件时，更容易区分
  - **提升效率**：无需查看完整路径即可知道文件位置

### 变量说明

#### `${dirname(-3)}`
- **作用**：获取文件路径中向上三级目录的名称
- **说明**：
  - `dirname`：目录名函数
  - `-3`：向上三级目录
  - 对于 `packages/components/src/button/index.tsx`：
    - `-1`：`button`
    - `-2`：`src`
    - `-3`：`components`（包名）

#### `${filename}`
- **作用**：获取文件名（不含路径）
- **说明**：只显示文件名和扩展名

### 配置文件位置

- **路径**：`.vscode/settings.json`
- **作用域**：工作区级别配置
- **说明**：
  - 只影响当前工作区
  - 团队成员共享相同的编辑器配置
  - 可以提交到版本控制

### 优势

- **统一体验**：团队成员使用相同的编辑器配置
- **提升效率**：自定义标签让 monorepo 项目更易导航
- **配置复用**：使用共享的 Prettier 配置，保持代码格式一致
- **易于维护**：配置集中管理，修改方便

